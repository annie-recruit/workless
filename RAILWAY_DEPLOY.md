# π‚ Railway λ°°ν¬ κ°€μ΄λ“

## π“‹ μ‚¬μ „ μ¤€λΉ„

1. **GitHubμ— μ½”λ“ ν‘Έμ‹** (ν•„μ)
   ```bash
   git push origin main
   ```
   - GitHub μΈμ¦μ΄ ν•„μ”ν•λ©΄ λΈλΌμ°μ €μ—μ„ μΈμ¦ν•μ„Έμ”

2. **Railway κ³„μ • μƒμ„±**
   - https://railway.app μ ‘μ†
   - GitHubλ΅ λ΅κ·ΈμΈ

## π€ Railway λ°°ν¬ λ‹¨κ³„

### 1. μƒ ν”„λ΅μ νΈ μƒμ„±
1. Railway λ€μ‹λ³΄λ“μ—μ„ **New Project** ν΄λ¦­
2. **Deploy from GitHub repo** μ„ νƒ
3. `annie-recruit/workless` λ¦¬ν¬μ§€ν† λ¦¬ μ„ νƒ

### 2. ν™κ²½ λ³€μ μ„¤μ •
Railway λ€μ‹λ³΄λ“μ—μ„ **Variables** νƒ­μΌλ΅ μ΄λ™:

| Name | Value | ν•„μ μ—¬λ¶€ |
|------|-------|----------|
| `NEXTAUTH_SECRET` | λλ¤ λ¬Έμμ—΄ (μ: `openssl rand -base64 32`λ΅ μƒμ„±) | β… ν•„μ |
| `NEXTAUTH_URL` | λ°°ν¬λ μ•± URL (μ: `https://your-app.railway.app`) | β… ν•„μ |
| `GOOGLE_CLIENT_ID` | Google OAuth ν΄λΌμ΄μ–ΈνΈ ID | β… ν•„μ |
| `GOOGLE_CLIENT_SECRET` | Google OAuth ν΄λΌμ΄μ–ΈνΈ μ‹ν¬λ¦Ώ | β… ν•„μ |
| `OPENAI_API_KEY` | OpenAI API ν‚¤ | β… ν•„μ |
| `PDF_SERVICES_CLIENT_ID` | Adobe PDF Services ν΄λΌμ΄μ–ΈνΈ ID (μ„ νƒ) | β μ„ νƒ |
| `PDF_SERVICES_CLIENT_SECRET` | Adobe PDF Services ν΄λΌμ΄μ–ΈνΈ μ‹ν¬λ¦Ώ (μ„ νƒ) | β μ„ νƒ |

**NEXTAUTH_SECRET μƒμ„± λ°©λ²•:**
ν„°λ―Έλ„μ—μ„ λ‹¤μ λ…λ Ήμ–΄ μ‹¤ν–‰:
```bash
openssl rand -base64 32
```
μƒμ„±λ λ¬Έμμ—΄μ„ `NEXTAUTH_SECRET` κ°’μΌλ΅ μ‚¬μ©ν•μ„Έμ”.

### 3. λ³Όλ¥¨ μ„¤μ • (λ°μ΄ν„°λ² μ΄μ¤ μκµ¬ μ €μ¥)
1. **Settings** νƒ­μΌλ΅ μ΄λ™
2. **Volumes** μ„Ήμ…μ—μ„ **Add Volume** ν΄λ¦­
3. Mount Path: `/app/data`
4. **Add** ν΄λ¦­

### 4. λ°°ν¬ ν™•μΈ
1. Railwayκ°€ μλ™μΌλ΅ λΉλ“ λ° λ°°ν¬ μ‹μ‘
2. **Deployments** νƒ­μ—μ„ λ°°ν¬ μƒνƒ ν™•μΈ
3. λ°°ν¬ μ™„λ£ ν›„ **Settings** > **Generate Domain** ν΄λ¦­ν•μ—¬ λ„λ©”μΈ μƒμ„±

## β… λ°°ν¬ μ™„λ£!

λ°°ν¬λ URLλ΅ μ ‘μ†ν•λ©΄ μ•±μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤!

## π”„ μ—…λ°μ΄νΈ λ°©λ²•

μ½”λ“ μμ • ν›„ GitHubμ— ν‘Έμ‹ν•λ©΄ Railwayκ°€ μλ™μΌλ΅ μ¬λ°°ν¬ν•©λ‹λ‹¤:

```bash
git add .
git commit -m "Update feature"
git push origin main
```

## π“± PWA μ„¤μΉ

λ°°ν¬λ μ‚¬μ΄νΈμ—μ„:
- **iOS (Safari)**: κ³µμ  λ²„νΌ β†’ "ν™ ν™”λ©΄μ— μ¶”κ°€"
- **Android (Chrome)**: λ©”λ‰΄ β†’ "μ•± μ„¤μΉ"

## π’΅ ν

- Railway λ€μ‹λ³΄λ“μ—μ„ λ΅κ·Έ ν™•μΈ κ°€λ¥
- ν™κ²½ λ³€μλ” μ–Έμ λ“ μ§€ μμ • κ°€λ¥
- λ³Όλ¥¨μ€ λ°μ΄ν„°λ² μ΄μ¤ νμΌμ„ μκµ¬ μ €μ¥ν•©λ‹λ‹¤
- λ¬΄λ£ ν”λ: $5 ν¬λ λ”§/μ›” μ κ³µ

## π› λ¬Έμ  ν•΄κ²°

### λΉλ“ μ‹¤ν¨ μ‹
- Railway λ΅κ·Έ ν™•μΈ
- `package.json`μ λΉλ“ μ¤ν¬λ¦½νΈ ν™•μΈ
- Node.js λ²„μ „ ν™•μΈ (18 μ΄μƒ ν•„μ”)

### λ°μ΄ν„°λ² μ΄μ¤ μ¤λ¥ μ‹
- λ³Όλ¥¨μ΄ μ λ€λ΅ λ§μ΄νΈλμ—λ”μ§€ ν™•μΈ
- `/app/data` κ²½λ΅ ν™•μΈ

### μ„λ²„ μ—λ¬ (NO_SECRET) μ‹
- `NEXTAUTH_SECRET` ν™κ²½ λ³€μκ°€ μ„¤μ •λμ—λ”μ§€ ν™•μΈ
- Railway λ€μ‹λ³΄λ“μ **Variables** νƒ­μ—μ„ ν™κ²½ λ³€μ ν™•μΈ
- ν™κ²½ λ³€μ μ¶”κ°€ ν›„ μ„λΉ„μ¤λ¥Ό μ¬μ‹μ‘ν•μ„Έμ”

### Google OAuth μ„¤μ • λ°©λ²• (μ¤‘μ”!)

**β οΈ `redirect_uri_mismatch` μ¤λ¥ ν•΄κ²° λ°©λ²•:**

1. **Railway λ„λ©”μΈ ν™•μΈ**
   - Railway λ€μ‹λ³΄λ“μ—μ„ **Settings** > **Generate Domain** ν΄λ¦­ν•μ—¬ λ„λ©”μΈ μƒμ„±
   - μƒμ„±λ λ„λ©”μΈμ„ λ³µμ‚¬ (μ: `https://workless-production.up.railway.app`)

2. **Google Cloud Console μ„¤μ •**
   - [Google Cloud Console](https://console.cloud.google.com/) μ ‘μ†
   - μƒ ν”„λ΅μ νΈ μƒμ„± λλ” κΈ°μ΅΄ ν”„λ΅μ νΈ μ„ νƒ
   - **API λ° μ„λΉ„μ¤** > **μ‚¬μ©μ μΈμ¦ μ •λ³΄** μ΄λ™
   
   **κΈ°μ΅΄ OAuth ν΄λΌμ΄μ–ΈνΈ IDκ°€ μλ” κ²½μ°:**
   1. **μ‚¬μ©μ μΈμ¦ μ •λ³΄** νμ΄μ§€μ—μ„ OAuth 2.0 ν΄λΌμ΄μ–ΈνΈ ID λ©λ΅ ν™•μΈ
   2. λ©λ΅μ—μ„ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ IDμ **μ΄λ¦„**μ„ ν΄λ¦­ (μ: "μ›Ή ν΄λΌμ΄μ–ΈνΈ 1")
   3. ν΄λ¦­ν•λ©΄ **OAuth ν΄λΌμ΄μ–ΈνΈ νΈμ§‘** ν™”λ©΄μ΄ μ—΄λ¦Ό
   4. ν™”λ©΄ μ•„λμ½μ— **μΉμΈλ λ¦¬λ””λ ‰μ… URI** μ„Ήμ…μ΄ μμ
   5. **+ URI μ¶”κ°€** λ²„νΌμ„ ν΄λ¦­ν•κ±°λ‚, λΉ μ…λ ¥ ν•„λ“μ— μ§μ ‘ μ…λ ¥
   6. λ‹¤μ URIλ¥Ό **μ •ν™•ν** μ…λ ¥:
      ```
      https://your-railway-domain.railway.app/api/auth/callback/google
      ```
   7. κΈ°μ΅΄μ— `http://localhost:3000/api/auth/callback/google`μ΄ μ—†λ‹¤λ©΄ ν•¨κ» μ¶”κ°€
   8. ν™”λ©΄ λ§¨ μ•„λ **μ €μ¥** λ²„νΌ ν΄λ¦­
   
   **μ°Έκ³ :** 
   - "μΉμΈλ λ¦¬λ””λ ‰μ… URI" μ„Ήμ…μ΄ λ³΄μ΄μ§€ μ•μΌλ©΄ ν™”λ©΄μ„ μ•„λλ΅ μ¤ν¬λ΅¤
   - "μΉμΈλ JavaScript μ›λ³Έ" μ„Ήμ…κ³Όλ” λ‹¤λ¥Έ μ„Ήμ…μ…λ‹λ‹¤
   - URIλ” ν• μ¤„μ— ν•λ‚μ”© μ…λ ¥
   
   **OAuth ν΄λΌμ΄μ–ΈνΈ IDκ°€ μ—†λ” κ²½μ°μ—λ§:**
   - **μ‚¬μ©μ μΈμ¦ μ •λ³΄ λ§λ“¤κΈ°** > **OAuth ν΄λΌμ΄μ–ΈνΈ ID** μ„ νƒ
   - μ• ν”λ¦¬μΌ€μ΄μ… μ ν•: **μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…**
   - **μΉμΈλ λ¦¬λ””λ ‰μ… URI**μ— λ‹¤μμ„ **μ •ν™•ν** μ¶”κ°€:
     ```
     https://your-railway-domain.railway.app/api/auth/callback/google
     http://localhost:3000/api/auth/callback/google
     ```
   
   β οΈ **μ£Όμμ‚¬ν•­:**
   - `https://`λ΅ μ‹μ‘ν•΄μ•Ό ν•¨
   - λ§μ§€λ§‰μ— `/` μ—†μ΄ μ •ν™•ν μ…λ ¥
   - Railway λ„λ©”μΈκ³Ό μ •ν™•ν μΌμΉν•΄μ•Ό ν•¨
   - κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ IDλ¥Ό μμ •ν•λ” κ²ƒμ΄ μ•μ „ν•©λ‹λ‹¤ (μƒλ΅ λ§λ“¤ ν•„μ” μ—†μ)
   
3. **OAuth λ™μ ν™”λ©΄ μ„¤μ •**
   - **OAuth λ™μ ν™”λ©΄** νƒ­μΌλ΅ μ΄λ™
   - μ‚¬μ©μ μ ν• μ„ νƒ (μ™Έλ¶€ λλ” λ‚΄λ¶€)
   - μ•± μ΄λ¦„, μ‚¬μ©μ μ§€μ› μ΄λ©”μΌ λ“± ν•„μ μ •λ³΄ μ…λ ¥
   - ν…μ¤νΈ μ‚¬μ©μ μ¶”κ°€ (μ•±μ΄ κ²€μ¦λμ§€ μ•μ€ κ²½μ°)

4. **ν™κ²½ λ³€μ μ„¤μ •**
   - μƒμ„±λ **ν΄λΌμ΄μ–ΈνΈ ID**λ¥Ό `GOOGLE_CLIENT_ID`μ— μ„¤μ •
   - μƒμ„±λ **ν΄λΌμ΄μ–ΈνΈ μ‹ν¬λ¦Ώ**μ„ `GOOGLE_CLIENT_SECRET`μ— μ„¤μ •
   - Railway λ„λ©”μΈμ„ `NEXTAUTH_URL`μ— μ„¤μ • (μ: `https://your-railway-domain.railway.app`)

5. **λ¦¬λ””λ ‰μ… URI ν™•μΈ**
   - Google Cloud Consoleμ—μ„ μ„¤μ •ν• URIκ°€ Railway λ„λ©”μΈκ³Ό μ •ν™•ν μΌμΉν•λ”μ§€ ν™•μΈ
   - URIλ” λ€μ†λ¬Έμλ¥Ό κµ¬λ¶„ν•λ―€λ΅ μ •ν™•ν μ…λ ¥ν•΄μ•Ό ν•¨
   - λ³€κ²½ ν›„ λ‡ λ¶„ μ •λ„ κΈ°λ‹¤λ ¤μ•Ό λ°μλ  μ μμ
