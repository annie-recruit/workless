# π‚ Railway λ°°ν¬ κ°€μ΄λ“

## π“‹ μ‚¬μ „ μ¤€λΉ„

1. **GitHubμ— μ½”λ“ ν‘Έμ‹** (ν•„μ)
   ```bash
   git push origin main
   ```
   - GitHub μΈμ¦μ΄ ν•„μ”ν•λ©΄ λΈλΌμ°μ €μ—μ„ μΈμ¦ν•μ„Έμ”

2. **Railway κ³„μ • μƒμ„±**
   - https://railway.app μ ‘μ†
   - GitHubλ΅ λ΅κ·ΈμΈ

## π€ Railway λ°°ν¬ λ‹¨κ³„

### 1. μƒ ν”„λ΅μ νΈ μƒμ„±
1. Railway λ€μ‹λ³΄λ“μ—μ„ **New Project** ν΄λ¦­
2. **Deploy from GitHub repo** μ„ νƒ
3. `annie-recruit/workless` λ¦¬ν¬μ§€ν† λ¦¬ μ„ νƒ

### 2. ν™κ²½ λ³€μ μ„¤μ •
Railway λ€μ‹λ³΄λ“μ—μ„ **Variables** νƒ­μΌλ΅ μ΄λ™:

| Name | Value | ν•„μ μ—¬λ¶€ |
|------|-------|----------|
| `NEXTAUTH_SECRET` | λλ¤ λ¬Έμμ—΄ (μ: `openssl rand -base64 32`λ΅ μƒμ„±) | β… ν•„μ |
| `NEXTAUTH_URL` | λ°°ν¬λ μ•± URL (μ: `https://your-app.railway.app`) | β… ν•„μ |
| `GOOGLE_CLIENT_ID` | Google OAuth ν΄λΌμ΄μ–ΈνΈ ID | β… ν•„μ |
| `GOOGLE_CLIENT_SECRET` | Google OAuth ν΄λΌμ΄μ–ΈνΈ μ‹ν¬λ¦Ώ | β… ν•„μ |
| `OPENAI_API_KEY` | OpenAI API ν‚¤ | β… ν•„μ |
| `PDF_SERVICES_CLIENT_ID` | Adobe PDF Services ν΄λΌμ΄μ–ΈνΈ ID (μ„ νƒ) | β μ„ νƒ |
| `PDF_SERVICES_CLIENT_SECRET` | Adobe PDF Services ν΄λΌμ΄μ–ΈνΈ μ‹ν¬λ¦Ώ (μ„ νƒ) | β μ„ νƒ |

**NEXTAUTH_SECRET μƒμ„± λ°©λ²•:**
ν„°λ―Έλ„μ—μ„ λ‹¤μ λ…λ Ήμ–΄ μ‹¤ν–‰:
```bash
openssl rand -base64 32
```
μƒμ„±λ λ¬Έμμ—΄μ„ `NEXTAUTH_SECRET` κ°’μΌλ΅ μ‚¬μ©ν•μ„Έμ”.

### 3. λ³Όλ¥¨ μ„¤μ • (λ°μ΄ν„°λ² μ΄μ¤ μκµ¬ μ €μ¥)
1. **Settings** νƒ­μΌλ΅ μ΄λ™
2. **Volumes** μ„Ήμ…μ—μ„ **Add Volume** ν΄λ¦­
3. Mount Path: `/app/data`
4. **Add** ν΄λ¦­

### 4. λ°°ν¬ ν™•μΈ
1. Railwayκ°€ μλ™μΌλ΅ λΉλ“ λ° λ°°ν¬ μ‹μ‘
2. **Deployments** νƒ­μ—μ„ λ°°ν¬ μƒνƒ ν™•μΈ
3. λ°°ν¬ μ™„λ£ ν›„ **Settings** > **Generate Domain** ν΄λ¦­ν•μ—¬ λ„λ©”μΈ μƒμ„±

## β… λ°°ν¬ μ™„λ£!

λ°°ν¬λ URLλ΅ μ ‘μ†ν•λ©΄ μ•±μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤!

## π”„ μ—…λ°μ΄νΈ λ°©λ²•

μ½”λ“ μμ • ν›„ GitHubμ— ν‘Έμ‹ν•λ©΄ Railwayκ°€ μλ™μΌλ΅ μ¬λ°°ν¬ν•©λ‹λ‹¤:

```bash
git add .
git commit -m "Update feature"
git push origin main
```

## π“± PWA μ„¤μΉ

λ°°ν¬λ μ‚¬μ΄νΈμ—μ„:
- **iOS (Safari)**: κ³µμ  λ²„νΌ β†’ "ν™ ν™”λ©΄μ— μ¶”κ°€"
- **Android (Chrome)**: λ©”λ‰΄ β†’ "μ•± μ„¤μΉ"

## π’΅ ν

- Railway λ€μ‹λ³΄λ“μ—μ„ λ΅κ·Έ ν™•μΈ κ°€λ¥
- ν™κ²½ λ³€μλ” μ–Έμ λ“ μ§€ μμ • κ°€λ¥
- λ³Όλ¥¨μ€ λ°μ΄ν„°λ² μ΄μ¤ νμΌμ„ μκµ¬ μ €μ¥ν•©λ‹λ‹¤
- λ¬΄λ£ ν”λ: $5 ν¬λ λ”§/μ›” μ κ³µ

## π› λ¬Έμ  ν•΄κ²°

### λΉλ“ μ‹¤ν¨ μ‹
- Railway λ΅κ·Έ ν™•μΈ
- `package.json`μ λΉλ“ μ¤ν¬λ¦½νΈ ν™•μΈ
- Node.js λ²„μ „ ν™•μΈ (18 μ΄μƒ ν•„μ”)

### λ°μ΄ν„°λ² μ΄μ¤ μ¤λ¥ μ‹
- λ³Όλ¥¨μ΄ μ λ€λ΅ λ§μ΄νΈλμ—λ”μ§€ ν™•μΈ
- `/app/data` κ²½λ΅ ν™•μΈ

### μ„λ²„ μ—λ¬ (NO_SECRET) μ‹
- `NEXTAUTH_SECRET` ν™κ²½ λ³€μκ°€ μ„¤μ •λμ—λ”μ§€ ν™•μΈ
- Railway λ€μ‹λ³΄λ“μ **Variables** νƒ­μ—μ„ ν™κ²½ λ³€μ ν™•μΈ
- ν™κ²½ λ³€μ μ¶”κ°€ ν›„ μ„λΉ„μ¤λ¥Ό μ¬μ‹μ‘ν•μ„Έμ”

### Google OAuth μ„¤μ • λ°©λ²• (μ¤‘μ”!)

**β οΈ `redirect_uri_mismatch` μ¤λ¥ ν•΄κ²° λ°©λ²•:**

1. **Railway λ„λ©”μΈ ν™•μΈ**
   - Railway λ€μ‹λ³΄λ“μ—μ„ **Settings** > **Generate Domain** ν΄λ¦­ν•μ—¬ λ„λ©”μΈ μƒμ„±
   - μƒμ„±λ λ„λ©”μΈμ„ λ³µμ‚¬ (μ: `https://workless-production.up.railway.app`)

2. **Google Cloud Console μ„¤μ •**
   - [Google Cloud Console](https://console.cloud.google.com/) μ ‘μ†
   - μƒ ν”„λ΅μ νΈ μƒμ„± λλ” κΈ°μ΅΄ ν”„λ΅μ νΈ μ„ νƒ
   - **API λ° μ„λΉ„μ¤** > **μ‚¬μ©μ μΈμ¦ μ •λ³΄** μ΄λ™
   
   **β οΈ μ¤‘μ”: ν΄λΌμ΄μ–ΈνΈ νƒ€μ… ν™•μΈ**
   - ν„μ¬ OAuth ν΄λΌμ΄μ–ΈνΈκ°€ **"λ°μ¤ν¬ν†±μ ν΄λΌμ΄μ–ΈνΈ ID"** λλ” **"Desktop client"**λ΅ λμ–΄ μλ‹¤λ©΄
   - μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ© ν΄λΌμ΄μ–ΈνΈλ¥Ό μƒλ΅ λ§λ“¤μ–΄μ•Ό ν•©λ‹λ‹¤ (λ°μ¤ν¬ν†± ν΄λΌμ΄μ–ΈνΈλ” λ¦¬λ””λ ‰μ… URI μ„¤μ •μ΄ μ—†μ)
   - νμ΄μ§€ μƒλ‹¨μ— "λ°μ¤ν¬ν†±μ ν΄λΌμ΄μ–ΈνΈ ID" λλ” "Desktop client ID"λΌκ³  ν‘μ‹λμ–΄ μμΌλ©΄ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… νƒ€μ…μ΄ μ•„λ‹™λ‹λ‹¤
   
   **κΈ°μ΅΄ OAuth ν΄λΌμ΄μ–ΈνΈ IDκ°€ "μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…" νƒ€μ…μΈ κ²½μ°:**
   
   **λ°©λ²• 1: νΈμ§‘ λ²„νΌ μ‚¬μ© (κ¶μ¥)**
   1. **μ‚¬μ©μ μΈμ¦ μ •λ³΄** νμ΄μ§€μ—μ„ OAuth 2.0 ν΄λΌμ΄μ–ΈνΈ ID λ©λ΅ ν™•μΈ
   2. λ©λ΅μ—μ„ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ IDμ **μ΄λ¦„**μ„ ν΄λ¦­ (μ: "μ›Ή ν΄λΌμ΄μ–ΈνΈ 1")
   3. ν΄λΌμ΄μ–ΈνΈ μƒμ„Έ μ •λ³΄ νμ΄μ§€κ°€ μ—΄λ¦Ό
   4. ν™”λ©΄ μ¤λ¥Έμ½ μƒλ‹¨ λλ” μƒλ‹¨μ— **νΈμ§‘** (λλ” **μμ •**, **Edit**) λ²„νΌ μ°ΎκΈ°
   5. **νΈμ§‘** λ²„νΌ ν΄λ¦­ β†’ νΈμ§‘ λ¨λ“λ΅ μ „ν™
   6. ν™”λ©΄μ„ μ•„λλ΅ μ¤ν¬λ΅¤ν•μ—¬ **μΉμΈλ λ¦¬λ””λ ‰μ… URI** μ„Ήμ… μ°ΎκΈ°
   7. **+ URI μ¶”κ°€** λ²„νΌ ν΄λ¦­ν•κ±°λ‚ λΉ μ…λ ¥ ν•„λ“μ— μ§μ ‘ μ…λ ¥
   8. λ‹¤μ URIλ¥Ό **μ •ν™•ν** μ…λ ¥:
      ```
      https://your-railway-domain.railway.app/api/auth/callback/google
      ```
   9. κΈ°μ΅΄μ— `http://localhost:3000/api/auth/callback/google`μ΄ μ—†λ‹¤λ©΄ ν•¨κ» μ¶”κ°€
   10. ν™”λ©΄ λ§¨ μ•„λ **μ €μ¥** λ²„νΌ ν΄λ¦­
   
   **λ°©λ²• 2: λ©λ΅μ—μ„ μ§μ ‘ νΈμ§‘**
   1. **μ‚¬μ©μ μΈμ¦ μ •λ³΄** νμ΄μ§€μ—μ„ OAuth 2.0 ν΄λΌμ΄μ–ΈνΈ ID λ©λ΅ ν™•μΈ
   2. λ©λ΅μ—μ„ ν΄λΌμ΄μ–ΈνΈ ID μ¤λ¥Έμ½μ— μλ” **μ—°ν•„ μ•„μ΄μ½** (βοΈ) λλ” **νΈμ§‘** λ²„νΌ ν΄λ¦­
   3. νΈμ§‘ ν™”λ©΄μ—μ„ **μΉμΈλ λ¦¬λ””λ ‰μ… URI** μ„Ήμ… μ°ΎκΈ°
   4. URI μ¶”κ°€ ν›„ μ €μ¥
   
   **μ°Έκ³ :** 
   - ν΄λΌμ΄μ–ΈνΈ μƒμ„Έ μ •λ³΄ νμ΄μ§€μ—μ„λ” νΈμ§‘ λ²„νΌμ„ λλ¬μ•Ό νΈμ§‘ λ¨λ“λ΅ μ „ν™λ©λ‹λ‹¤
   - "μΉμΈλ λ¦¬λ””λ ‰μ… URI" μ„Ήμ…μ€ νΈμ§‘ λ¨λ“μ—μ„λ§ λ³΄μ…λ‹λ‹¤
   - ν™”λ©΄μ„ μ¶©λ¶„ν μ•„λλ΅ μ¤ν¬λ΅¤ν•΄μ•Ό μ„Ήμ…μ„ λ³Ό μ μμµλ‹λ‹¤
   
   **μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… νƒ€μ…μ OAuth ν΄λΌμ΄μ–ΈνΈ ID μƒμ„± (ν•„μ):**
   - **μ‚¬μ©μ μΈμ¦ μ •λ³΄** νμ΄μ§€μ—μ„ **+ μ‚¬μ©μ μΈμ¦ μ •λ³΄ λ§λ“¤κΈ°** ν΄λ¦­
   - **OAuth ν΄λΌμ΄μ–ΈνΈ ID** μ„ νƒ
   - **μ• ν”λ¦¬μΌ€μ΄μ… μ ν•**: λ°λ“μ‹ **μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…** μ„ νƒ (λ°μ¤ν¬ν†±μ΄ μ•„λ‹!)
   - **μ΄λ¦„**: μ›ν•λ” μ΄λ¦„ μ…λ ¥ (μ: "Workless Web Client")
   - **μΉμΈλ λ¦¬λ””λ ‰μ… URI** μ„Ήμ…μ—μ„ **+ URI μ¶”κ°€** ν΄λ¦­
   - λ‹¤μ URIλ“¤μ„ **μ •ν™•ν** μ¶”κ°€:
     ```
     https://your-railway-domain.railway.app/api/auth/callback/google
     http://localhost:3000/api/auth/callback/google
     ```
   - **λ§λ“¤κΈ°** λ²„νΌ ν΄λ¦­
   - μƒμ„±λ **ν΄λΌμ΄μ–ΈνΈ ID**μ™€ **ν΄λΌμ΄μ–ΈνΈ λ³΄μ• λΉ„λ°€λ²νΈ**λ¥Ό λ³µμ‚¬
   - Railway ν™κ²½ λ³€μμ— μ„¤μ •:
     - `GOOGLE_CLIENT_ID`: μƒλ΅ μƒμ„±ν• ν΄λΌμ΄μ–ΈνΈ ID
     - `GOOGLE_CLIENT_SECRET`: μƒλ΅ μƒμ„±ν• ν΄λΌμ΄μ–ΈνΈ λ³΄μ• λΉ„λ°€λ²νΈ
   
   **μ°Έκ³ :**
   - κΈ°μ΅΄ λ°μ¤ν¬ν†± ν΄λΌμ΄μ–ΈνΈλ” κ·Έλ€λ΅ λ‘μ–΄λ„ λ©λ‹λ‹¤ (λ‹¤λ¥Έ μ©λ„λ΅ μ‚¬μ© κ°€λ¥)
   - μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ© ν΄λΌμ΄μ–ΈνΈλ¥Ό λ³„λ„λ΅ λ§λ“¤μ–΄μ•Ό ν•©λ‹λ‹¤
   
   β οΈ **μ£Όμμ‚¬ν•­:**
   - `https://`λ΅ μ‹μ‘ν•΄μ•Ό ν•¨
   - λ§μ§€λ§‰μ— `/` μ—†μ΄ μ •ν™•ν μ…λ ¥
   - Railway λ„λ©”μΈκ³Ό μ •ν™•ν μΌμΉν•΄μ•Ό ν•¨
   - κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ IDλ¥Ό μμ •ν•λ” κ²ƒμ΄ μ•μ „ν•©λ‹λ‹¤ (μƒλ΅ λ§λ“¤ ν•„μ” μ—†μ)
   
3. **OAuth λ™μ ν™”λ©΄ μ„¤μ •**
   - **OAuth λ™μ ν™”λ©΄** νƒ­μΌλ΅ μ΄λ™
   - μ‚¬μ©μ μ ν• μ„ νƒ (μ™Έλ¶€ λλ” λ‚΄λ¶€)
   - μ•± μ΄λ¦„, μ‚¬μ©μ μ§€μ› μ΄λ©”μΌ λ“± ν•„μ μ •λ³΄ μ…λ ¥
   - ν…μ¤νΈ μ‚¬μ©μ μ¶”κ°€ (μ•±μ΄ κ²€μ¦λμ§€ μ•μ€ κ²½μ°)

4. **ν™κ²½ λ³€μ μ„¤μ •**
   - μƒμ„±λ **ν΄λΌμ΄μ–ΈνΈ ID**λ¥Ό `GOOGLE_CLIENT_ID`μ— μ„¤μ •
   - μƒμ„±λ **ν΄λΌμ΄μ–ΈνΈ μ‹ν¬λ¦Ώ**μ„ `GOOGLE_CLIENT_SECRET`μ— μ„¤μ •
   - Railway λ„λ©”μΈμ„ `NEXTAUTH_URL`μ— μ„¤μ • (μ: `https://your-railway-domain.railway.app`)

5. **λ¦¬λ””λ ‰μ… URI ν™•μΈ λ° λ””λ²„κΉ…**
   
   **μ¤‘μ”: λ¦¬λ””λ ‰μ… URI ν•μ‹**
   - NextAuthλ” λ‹¤μ ν•μ‹μ URIλ¥Ό μ‚¬μ©ν•©λ‹λ‹¤:
     ```
     {NEXTAUTH_URL}/api/auth/callback/google
     ```
   - μμ‹: `https://workless-production.up.railway.app/api/auth/callback/google`
   
   **ν™•μΈ μ‚¬ν•­:**
   1. Railway λ€μ‹λ³΄λ“μ—μ„ μ‹¤μ  λ„λ©”μΈ ν™•μΈ
      - **Settings** > **Networking** λλ” **Settings** > **Generate Domain**
      - μ „μ²΄ λ„λ©”μΈμ„ λ³µμ‚¬ (μ: `https://workless-production.up.railway.app`)
   
   2. Google Cloud Consoleμ— μ„¤μ •ν• URI ν™•μΈ
      - **API λ° μ„λΉ„μ¤** > **μ‚¬μ©μ μΈμ¦ μ •λ³΄** > μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… ν΄λΌμ΄μ–ΈνΈ ν΄λ¦­
      - **μΉμΈλ λ¦¬λ””λ ‰μ… URI** μ„Ήμ… ν™•μΈ
      - λ‹¤μ ν•μ‹μ΄ μ •ν™•ν ν¬ν•¨λμ–΄ μλ”μ§€ ν™•μΈ:
        ```
        https://your-railway-domain.railway.app/api/auth/callback/google
        ```
      - β οΈ **μ£Όμμ‚¬ν•­:**
        - `https://`λ΅ μ‹μ‘ν•΄μ•Ό ν•¨
        - λ§μ§€λ§‰μ— `/` μ—†μ
        - `/api/auth/callback/google` κ²½λ΅κ°€ μ •ν™•ν μΌμΉν•΄μ•Ό ν•¨
        - λ„λ©”μΈ μ΄λ¦„μ΄ Railway λ„λ©”μΈκ³Ό μ •ν™•ν μΌμΉν•΄μ•Ό ν•¨
   
   3. Railway ν™κ²½ λ³€μ ν™•μΈ
      - `NEXTAUTH_URL`: Railway λ„λ©”μΈκ³Ό μ •ν™•ν μΌμΉν•΄μ•Ό ν•¨
        - μ: `https://workless-production.up.railway.app`
        - `http://`κ°€ μ•„λ‹ `https://` μ‚¬μ©
        - λ§μ§€λ§‰μ— `/` μ—†μ
      - `GOOGLE_CLIENT_ID`: μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… ν΄λΌμ΄μ–ΈνΈ ID
      - `GOOGLE_CLIENT_SECRET`: μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… ν΄λΌμ΄μ–ΈνΈ μ‹ν¬λ¦Ώ
   
   4. λ³€κ²½μ‚¬ν•­ λ°μ
      - Google Cloud Consoleμ—μ„ λ³€κ²½ ν›„ **5-10λ¶„** λ€κΈ°
      - Railway ν™κ²½ λ³€μ λ³€κ²½ ν›„ μ„λΉ„μ¤ μ¬μ‹μ‘
      - λΈλΌμ°μ € μΊμ‹ λ° μΏ ν‚¤ μ‚­μ  ν›„ λ‹¤μ‹ μ‹λ„
   
   **λ””λ²„κΉ… ν:**
   - Google OAuth μ¤λ¥ νμ΄μ§€μ—μ„ μ‹¤μ  μ”μ²­λ URI ν™•μΈ κ°€λ¥
   - Railway λ΅κ·Έμ—μ„ `NEXTAUTH_URL` κ°’ ν™•μΈ
   - Google Cloud Consoleμ "μΉμΈλ λ¦¬λ””λ ‰μ… URI" λ©λ΅κ³Ό λΉ„κµ
