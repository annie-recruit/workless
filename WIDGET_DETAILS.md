# ğŸ¨ ì‹ ê·œ ìœ„ì ¯ ìƒì„¸ ì„¤ê³„ì„œ

## 1. ğŸ“ˆ íƒ€ì„ë¼ì¸ ìœ„ì ¯ (Timeline Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ìº”ë²„ìŠ¤ì— ë°°ì¹˜ ê°€ëŠ¥í•œ ì‹œê°„ì¶• ê¸°ë°˜ ë©”ëª¨ë¦¬ ì‹œê°í™” ìœ„ì ¯. í”„ë¡œì íŠ¸ ì§„í–‰, ìŠµê´€ í˜•ì„±, ì•„ì´ë””ì–´ ë°œì „ ê³¼ì •ì„ ì‹œê°„ìˆœìœ¼ë¡œ ì¶”ì .

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 1.1 ì‹œê°„ì¶• í‘œì‹œ
- **ìˆ˜í‰ íƒ€ì„ë¼ì¸**: ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ íë¥´ëŠ” ì‹œê°„ì¶•
- **ìˆ˜ì§ íƒ€ì„ë¼ì¸**: ìœ„ì—ì„œ ì•„ë˜ë¡œ íë¥´ëŠ” ì‹œê°„ì¶• (ì˜µì…˜)
- **ì‹œê°„ ë‹¨ìœ„ ì„ íƒ**: ì¼/ì£¼/ì›”/ë…„ ë‹¨ìœ„ ì „í™˜
- **ì¤Œ ê¸°ëŠ¥**: íŠ¹ì • ê¸°ê°„ í™•ëŒ€/ì¶•ì†Œ
- **í˜„ì¬ ì‹œê°„ í‘œì‹œ**: ì˜¤ëŠ˜/ì§€ê¸ˆ ìœ„ì¹˜ ë§ˆì»¤

#### 1.2 ë©”ëª¨ë¦¬ ë°°ì¹˜
- **ìë™ ë°°ì¹˜**: ë©”ëª¨ë¦¬ì˜ `createdAt` ê¸°ë°˜ ìë™ ìœ„ì¹˜
- **ìˆ˜ë™ ë°°ì¹˜**: ë“œë˜ê·¸ë¡œ ì‹œê°„ì¶•ì— ë©”ëª¨ë¦¬ ë°°ì¹˜
- **ë‹¤ì¤‘ ë©”ëª¨ë¦¬**: ê°™ì€ ì‹œê°„ëŒ€ ì—¬ëŸ¬ ë©”ëª¨ë¦¬ ìŠ¤íƒ í‘œì‹œ
- **ë©”ëª¨ë¦¬ ë¯¸ë¦¬ë³´ê¸°**: í˜¸ë²„ ì‹œ ì¹´ë“œ ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°
- **ë©”ëª¨ë¦¬ ì—°ê²°**: ì‹œê°„ì  ê´€ê³„ë¥¼ ë³´ì—¬ì£¼ëŠ” ì—°ê²°ì„ 

#### 1.3 í•„í„°ë§ & ê·¸ë£¹í™”
- **ê¸°ê°„ í•„í„°**: ì‹œì‘ì¼/ì¢…ë£Œì¼ ì„¤ì •
- **íƒœê·¸ í•„í„°**: íŠ¹ì • íƒœê·¸ë§Œ í‘œì‹œ
- **í˜ë¥´ì†Œë‚˜ í•„í„°**: í˜ë¥´ì†Œë‚˜ë³„ í•„í„°ë§
- **ê·¸ë£¹í™”**: ì£¼ì œë³„/ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹ í‘œì‹œ
- **ìƒ‰ìƒ ì½”ë”©**: nature/íƒœê·¸ë³„ ìƒ‰ìƒ êµ¬ë¶„

#### 1.4 ì¸í„°ë™ì…˜
- **í´ë¦­**: ë©”ëª¨ë¦¬ ìƒì„¸ ë³´ê¸°
- **ë“œë˜ê·¸**: ë©”ëª¨ë¦¬ ì‹œê°„ ìœ„ì¹˜ ë³€ê²½
- **ìŠ¤í¬ë¡¤**: ì‹œê°„ì¶• ì¢Œìš° ì´ë™
- **ì¤Œ**: ë§ˆìš°ìŠ¤ íœ ë¡œ í™•ëŒ€/ì¶•ì†Œ
- **ë”ë¸”í´ë¦­**: ìƒˆ ë©”ëª¨ë¦¬ ìƒì„± (í•´ë‹¹ ì‹œê°„)

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—“ï¸ íƒ€ì„ë¼ì¸ ìœ„ì ¯                    [âš™ï¸] [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚
â”‚  1ì›”   2ì›”      3ì›”     4ì›”     5ì›”    ...      â”‚
â”‚        â”‚        â”‚       â”‚       â”‚              â”‚
â”‚        ğŸ“       ğŸ“      ğŸ“      ğŸ“              â”‚
â”‚        ì•„ì´ë””ì–´  íšŒì˜ë¡   ìš”ì•½    ì•„ì´ë””ì–´       â”‚
â”‚                                                 â”‚
â”‚  [â—€ ì´ì „]  [ì˜¤ëŠ˜]  [ë‹¤ìŒ â–¶]  [ì „ì²´ ë³´ê¸°]       â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface TimelineBlockConfig {
  id: string;
  type: 'timeline';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ì‹œê°„ ì„¤ì •
  startDate: number;        // ì‹œì‘ ë‚ ì§œ (timestamp)
  endDate: number;          // ì¢…ë£Œ ë‚ ì§œ (timestamp)
  viewMode: 'day' | 'week' | 'month' | 'year';
  timeUnit: number;         // ì‹œê°„ ë‹¨ìœ„ (ë°€ë¦¬ì´ˆ)
  
  // ë©”ëª¨ë¦¬ ì—°ê²°
  linkedMemoryIds: string[]; // íƒ€ì„ë¼ì¸ì— í‘œì‹œí•  ë©”ëª¨ë¦¬
  autoLink: boolean;        // ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì¶”ê°€ ì—¬ë¶€
  linkFilter?: {
    tags?: string[];
    personas?: string[];
    nature?: string[];
  };
  
  // ì‹œê°í™” ì˜µì…˜
  showConnections: boolean;  // ë©”ëª¨ë¦¬ ê°„ ì—°ê²°ì„ 
  showMilestones: boolean;   // ë§ˆì¼ìŠ¤í†¤ í‘œì‹œ
  colorBy: 'nature' | 'tag' | 'persona' | 'none';
  layout: 'horizontal' | 'vertical';
  
  // ì¸í„°ë™ì…˜
  allowDrag: boolean;        // ë“œë˜ê·¸ë¡œ ì‹œê°„ ë³€ê²½ í—ˆìš©
  allowCreate: boolean;      // íƒ€ì„ë¼ì¸ì—ì„œ ìƒˆ ë©”ëª¨ë¦¬ ìƒì„±
  snapToGrid: boolean;       // ê·¸ë¦¬ë“œì— ë§ì¶”ê¸°
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/TimelineBlock.tsx
export default function TimelineBlock({
  blockId,
  x,
  y,
  width,
  height,
  config,
  memories,
  onUpdate,
  onDelete,
}: TimelineBlockProps) {
  // 1. ì‹œê°„ì¶• ê³„ì‚°
  const timeScale = useMemo(() => {
    return d3.scaleTime()
      .domain([config.startDate, config.endDate])
      .range([0, width]);
  }, [config, width]);
  
  // 2. ë©”ëª¨ë¦¬ ìœ„ì¹˜ ê³„ì‚°
  const memoryPositions = useMemo(() => {
    return config.linkedMemoryIds.map(memoryId => {
      const memory = memories.find(m => m.id === memoryId);
      if (!memory) return null;
      return {
        memoryId,
        x: timeScale(memory.createdAt),
        y: height / 2,
      };
    }).filter(Boolean);
  }, [config, memories, timeScale, height]);
  
  // 3. ë Œë”ë§
  return (
    <div className="timeline-block">
      {/* ì‹œê°„ì¶• */}
      <svg className="timeline-axis">
        <TimeAxis scale={timeScale} />
      </svg>
      
      {/* ë©”ëª¨ë¦¬ ë§ˆì»¤ */}
      {memoryPositions.map(pos => (
        <MemoryMarker
          key={pos.memoryId}
          x={pos.x}
          y={pos.y}
          memory={memories.find(m => m.id === pos.memoryId)}
          onClick={() => handleMemoryClick(pos.memoryId)}
          onDrag={(newX) => handleTimeChange(pos.memoryId, newX)}
        />
      ))}
      
      {/* ì—°ê²°ì„  */}
      {config.showConnections && (
        <ConnectionLines memories={memories} positions={memoryPositions} />
      )}
    </div>
  );
}
```

#### API ì—”ë“œí¬ì¸íŠ¸
```typescript
// app/api/board/blocks/[id]/timeline/route.ts
// GET: íƒ€ì„ë¼ì¸ ë°ì´í„° ì¡°íšŒ
// POST: ë©”ëª¨ë¦¬ ì‹œê°„ ë³€ê²½
// PUT: íƒ€ì„ë¼ì¸ ì„¤ì • ì—…ë°ì´íŠ¸
```

### ğŸ“± ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

**ì‹œë‚˜ë¦¬ì˜¤ 1: í”„ë¡œì íŠ¸ ì§„í–‰ ì¶”ì **
```
1. íƒ€ì„ë¼ì¸ ìœ„ì ¯ ìƒì„±
2. í”„ë¡œì íŠ¸ ì‹œì‘ì¼/ì¢…ë£Œì¼ ì„¤ì •
3. ê´€ë ¨ ë©”ëª¨ë¦¬ ìë™ ì—°ê²°
4. ì§„í–‰ ìƒí™© ì‹œê°ì ìœ¼ë¡œ í™•ì¸
5. ë§ˆì¼ìŠ¤í†¤ ì¶”ê°€
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ìŠµê´€ í˜•ì„± ê¸°ë¡**
```
1. ì¼ ë‹¨ìœ„ íƒ€ì„ë¼ì¸ ìƒì„±
2. ë§¤ì¼ ìŠµê´€ ê´€ë ¨ ë©”ëª¨ë¦¬ ì‘ì„±
3. íƒ€ì„ë¼ì¸ì—ì„œ ì—°ì†ì„± í™•ì¸
4. ë¹ˆ ë‚ ì§œ ë°œê²¬ â†’ ë™ê¸° ë¶€ì—¬
```

---

## 2. ğŸ—ºï¸ ì§€ë„ ìœ„ì ¯ (Map Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ìœ„ì¹˜ ì •ë³´ê°€ ìˆëŠ” ë©”ëª¨ë¦¬ë¥¼ ì§€ë„ì— í‘œì‹œí•˜ê³ , ì§€ì—­ë³„ë¡œ í´ëŸ¬ìŠ¤í„°ë§í•˜ì—¬ ê³µê°„ì  ê´€ê³„ë¥¼ ì‹œê°í™”.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 2.1 ì§€ë„ í‘œì‹œ
- **ì§€ë„ íƒ€ì…**: ë¡œë“œë§µ/ìœ„ì„±/ì§€í˜•ë„ ì „í™˜
- **ì¤Œ/íŒ¬**: í™•ëŒ€/ì¶•ì†Œ ë° ì´ë™
- **í˜„ì¬ ìœ„ì¹˜**: GPS ê¸°ë°˜ í˜„ì¬ ìœ„ì¹˜ í‘œì‹œ
- **ê²€ìƒ‰**: ì£¼ì†Œ/ì¥ì†Œëª… ê²€ìƒ‰
- **ë ˆì´ì–´**: ë§ˆì»¤/í´ëŸ¬ìŠ¤í„°/ê²½ë¡œ ë ˆì´ì–´ í† ê¸€

#### 2.2 ë©”ëª¨ë¦¬ ë§ˆì»¤
- **ìë™ ë§ˆì»¤**: ìœ„ì¹˜ ì •ë³´ê°€ ìˆëŠ” ë©”ëª¨ë¦¬ ìë™ í‘œì‹œ
- **ë§ˆì»¤ ìŠ¤íƒ€ì¼**: ë©”ëª¨ë¦¬ íƒ€ì…ë³„ ë‹¤ë¥¸ ì•„ì´ì½˜
- **í´ëŸ¬ìŠ¤í„°ë§**: ê°€ê¹Œìš´ ë§ˆì»¤ ìë™ ê·¸ë£¹í™”
- **í˜¸ë²„ íš¨ê³¼**: ë§ˆì»¤ í˜¸ë²„ ì‹œ ë©”ëª¨ë¦¬ ë¯¸ë¦¬ë³´ê¸°
- **í´ë¦­**: ë©”ëª¨ë¦¬ ìƒì„¸ ë³´ê¸°

#### 2.3 ì¸í„°ë™ì…˜
- **ì§€ë„ í´ë¦­**: í•´ë‹¹ ìœ„ì¹˜ì— ìƒˆ ë©”ëª¨ë¦¬ ìƒì„±
- **ë“œë˜ê·¸**: ë§ˆì»¤ ìœ„ì¹˜ ë³€ê²½
- **í•„í„°**: íƒœê·¸/ë‚ ì§œ/í˜ë¥´ì†Œë‚˜ë³„ í•„í„°ë§
- **ê²½ë¡œ ê·¸ë¦¬ê¸°**: ì—¬ëŸ¬ ìœ„ì¹˜ ì—°ê²°í•˜ì—¬ ê²½ë¡œ í‘œì‹œ
- **ë°˜ê²½ ê²€ìƒ‰**: íŠ¹ì • ë°˜ê²½ ë‚´ ë©”ëª¨ë¦¬ë§Œ í‘œì‹œ

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—ºï¸ ì§€ë„ ìœ„ì ¯              [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ë¡œë“œë§µ â–¼]  [ğŸ” ê²€ìƒ‰...]  [ğŸ“ í˜„ì¬ìœ„ì¹˜] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚              ğŸ—ºï¸ ì§€ë„ ì˜ì—­               â”‚
â”‚                                         â”‚
â”‚         ğŸ“  ğŸ“                          â”‚
â”‚            ğŸ“                           â”‚
â”‚      ğŸ“                                 â”‚
â”‚                                         â”‚
â”‚  [ğŸ“ 12ê°œ ë©”ëª¨ë¦¬]  [ê²½ë¡œ ê·¸ë¦¬ê¸°]        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface MapBlockConfig {
  id: string;
  type: 'map';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ì§€ë„ ì„¤ì •
  center: { lat: number; lng: number };
  zoom: number;
  mapType: 'roadmap' | 'satellite' | 'terrain';
  mapProvider: 'google' | 'naver' | 'openstreetmap';
  
  // ë©”ëª¨ë¦¬ ì—°ê²°
  linkedMemoryIds: string[];
  autoLink: boolean;  // ìœ„ì¹˜ ì •ë³´ ìˆëŠ” ë©”ëª¨ë¦¬ ìë™ ì¶”ê°€
  showOnlyWithLocation: boolean;
  
  // ì‹œê°í™”
  showMarkers: boolean;
  showClusters: boolean;
  clusterRadius: number;
  showPaths: boolean;
  pathMemoryIds: string[][];  // ê²½ë¡œ ê·¸ë£¹
  
  // í•„í„°
  filters?: {
    dateRange?: { start: number; end: number };
    tags?: string[];
    radius?: number;  // ì¤‘ì‹¬ì  ê¸°ì¤€ ë°˜ê²½ (ë¯¸í„°)
  };
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/MapBlock.tsx
import { GoogleMap, Marker, Clusterer, useLoadScript } from '@react-google-maps/api';

export default function MapBlock({
  blockId,
  config,
  memories,
  onUpdate,
}: MapBlockProps) {
  const { isLoaded } = useLoadScript({
    googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY,
  });
  
  // ìœ„ì¹˜ ì •ë³´ê°€ ìˆëŠ” ë©”ëª¨ë¦¬ í•„í„°ë§
  const locationMemories = useMemo(() => {
    return memories.filter(m => m.location);
  }, [memories]);
  
  // í´ëŸ¬ìŠ¤í„°ë§
  const clusters = useMemo(() => {
    return clusterMemories(locationMemories, config.clusterRadius);
  }, [locationMemories, config.clusterRadius]);
  
  if (!isLoaded) return <div>ì§€ë„ ë¡œë”© ì¤‘...</div>;
  
  return (
    <div className="map-block">
      <GoogleMap
        mapContainerStyle={{ width: '100%', height: '100%' }}
        center={config.center}
        zoom={config.zoom}
        options={{
          mapTypeId: config.mapType,
          disableDefaultUI: false,
        }}
        onDragEnd={(e) => {
          const center = e.getCenter();
          onUpdate(blockId, {
            config: { ...config, center: { lat: center.lat(), lng: center.lng() } }
          });
        }}
        onZoomChanged={(e) => {
          const zoom = e.getZoom();
          onUpdate(blockId, { config: { ...config, zoom } });
        }}
        onClick={(e) => {
          // ì§€ë„ í´ë¦­ ì‹œ ìƒˆ ë©”ëª¨ë¦¬ ìƒì„±
          handleMapClick(e.latLng);
        }}
      >
        {/* ë§ˆì»¤ */}
        {config.showMarkers && locationMemories.map(memory => (
          <Marker
            key={memory.id}
            position={{
              lat: memory.location!.latitude,
              lng: memory.location!.longitude,
            }}
            title={memory.title || memory.content.slice(0, 50)}
            onClick={() => handleMarkerClick(memory.id)}
            icon={getMarkerIcon(memory)}
          />
        ))}
        
        {/* í´ëŸ¬ìŠ¤í„° */}
        {config.showClusters && (
          <Clusterer>
            {clusters.map(cluster => (
              <ClusterMarker
                key={cluster.id}
                position={cluster.center}
                count={cluster.memories.length}
                onClick={() => handleClusterClick(cluster)}
              />
            ))}
          </Clusterer>
        )}
      </GoogleMap>
      
      {/* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */}
      <MapControls
        onSearch={handleSearch}
        onFilter={handleFilter}
        onDrawPath={handleDrawPath}
      />
    </div>
  );
}
```

#### ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
```typescript
// lib/mapUtils.ts
export function clusterMemories(
  memories: Memory[],
  radius: number
): Cluster[] {
  // K-means ë˜ëŠ” DBSCAN ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
  // ê°€ê¹Œìš´ ë©”ëª¨ë¦¬ë“¤ì„ ê·¸ë£¹í™”
}

export function calculatePath(
  memoryIds: string[],
  memories: Memory[]
): Path {
  // ë©”ëª¨ë¦¬ë“¤ì„ ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ê²½ë¡œ ê³„ì‚°
  // TSP (Traveling Salesman Problem) ì•Œê³ ë¦¬ì¦˜ ì ìš© ê°€ëŠ¥
}
```

### ğŸ“± ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

**ì‹œë‚˜ë¦¬ì˜¤ 1: ì—¬í–‰ ê¸°ë¡**
```
1. ì—¬í–‰ ì¤‘ ê° ì¥ì†Œì—ì„œ ë©”ëª¨ë¦¬ ì‘ì„± (ìë™ ìœ„ì¹˜ ì €ì¥)
2. ì§€ë„ ìœ„ì ¯ì—ì„œ ì—¬í–‰ ê²½ë¡œ í™•ì¸
3. ì‚¬ì§„ê³¼ í•¨ê»˜ ì¥ì†Œë³„ ì¶”ì–µ ì •ë¦¬
4. ê²½ë¡œ ê·¸ë¦¬ê¸°ë¡œ ì—¬í–‰ ë£¨íŠ¸ ì‹œê°í™”
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ì§€ì—­ë³„ ì•„ì´ë””ì–´ ìˆ˜ì§‘**
```
1. ì¹´í˜/ì„œì  ë“±ì—ì„œ ì•„ì´ë””ì–´ ë©”ëª¨ë¦¬ ì‘ì„±
2. ì§€ë„ì—ì„œ ì•„ì´ë””ì–´ ë°€ì§‘ ì§€ì—­ ë°œê²¬
3. ì§€ì—­ë³„ ì£¼ì œ íŒ¨í„´ ë¶„ì„
4. ìƒˆë¡œìš´ ì˜ê° ì¥ì†Œ ë°œê²¬
```

---

## 3. ğŸ“Š í†µê³„ ëŒ€ì‹œë³´ë“œ ìœ„ì ¯ (Stats Dashboard)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ë©”ëª¨ë¦¬ ë°ì´í„°ë¥¼ ë‹¤ì–‘í•œ ì°¨íŠ¸ì™€ ê·¸ë˜í”„ë¡œ ì‹œê°í™”í•˜ì—¬ ìƒê° íŒ¨í„´, ìƒì‚°ì„±, ê°ì • ì¶”ì´ ë“±ì„ ë¶„ì„.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 3.1 ë©”íŠ¸ë¦­ ì¹´ë“œ
- **ì´ ë©”ëª¨ë¦¬ ìˆ˜**: ì „ì²´/ê¸°ê°„ë³„ ì¹´ìš´íŠ¸
- **í‰ê·  ì‘ì„±ëŸ‰**: ì¼/ì£¼/ì›” í‰ê· 
- **ê°€ì¥ í™œë°œí•œ ì‹œê°„**: ì‹œê°„ëŒ€ë³„ ë¶„í¬
- **íƒœê·¸ í†µê³„**: ì¸ê¸° íƒœê·¸ Top 10
- **ì—°ê²° í†µê³„**: í‰ê·  ì—°ê²° ìˆ˜

#### 3.2 ì°¨íŠ¸
- **íŒŒì´ ì°¨íŠ¸**: ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬
- **ë°” ì°¨íŠ¸**: ì‹œê°„ëŒ€ë³„/ìš”ì¼ë³„ ì‘ì„±ëŸ‰
- **ë¼ì¸ ì°¨íŠ¸**: ì‹œê°„ì— ë”°ë¥¸ ì¶”ì´
- **íˆíŠ¸ë§µ**: ìš”ì¼Ã—ì‹œê°„ëŒ€ ì‘ì„± íŒ¨í„´
- **ì›Œë“œ í´ë¼ìš°ë“œ**: íƒœê·¸ ë¹ˆë„ ì‹œê°í™”

#### 3.3 í•„í„°ë§
- **ê¸°ê°„ ì„ íƒ**: ì¼/ì£¼/ì›”/ë…„/ì „ì²´
- **í˜ë¥´ì†Œë‚˜ í•„í„°**: íŠ¹ì • í˜ë¥´ì†Œë‚˜ë§Œ
- **íƒœê·¸ í•„í„°**: íŠ¹ì • íƒœê·¸ í¬í•¨
- **ìë™ ìƒˆë¡œê³ ì¹¨**: ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š í†µê³„ ëŒ€ì‹œë³´ë“œ          [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì˜¤ëŠ˜ â–¼]  [ìë™ ìƒˆë¡œê³ ì¹¨ âœ“]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ ì´  â”‚ â”‚ í‰ê· â”‚ â”‚ ìµœê³ â”‚ â”‚ ì—°ê²°â”‚       â”‚
â”‚ â”‚ 234 â”‚ â”‚ 12  â”‚ â”‚ 15ì‹œâ”‚ â”‚ 3.2 â”‚       â”‚
â”‚ â”‚ê°œ   â”‚ â”‚ê°œ/ì¼â”‚ â”‚     â”‚ â”‚ê°œ   â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                         â”‚
â”‚  [ğŸ“Š ì¹´í…Œê³ ë¦¬ ë¶„í¬]                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  ì•„ì´ë””ì–´ â–ˆâ–ˆâ–ˆâ–ˆ 45%  â”‚               â”‚
â”‚  â”‚  ì—…ë¬´     â–ˆâ–ˆâ–ˆ  30%  â”‚               â”‚
â”‚  â”‚  ê°ì •     â–ˆâ–ˆ   15%  â”‚               â”‚
â”‚  â”‚  ê¸°ë¡     â–ˆ    10%  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                         â”‚
â”‚  [ğŸ“ˆ ì‹œê°„ëŒ€ë³„ ì‘ì„±ëŸ‰]                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚     â–â–ƒâ–…â–‡â–ˆâ–‡â–…â–ƒâ–      â”‚               â”‚
â”‚  â”‚  0  6 12 18 24ì‹œ    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface StatsBlockConfig {
  id: string;
  type: 'stats';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // í‘œì‹œí•  ë©”íŠ¸ë¦­
  metrics: Array<{
    type: 'count' | 'average' | 'peak' | 'connections' | 'tags';
    label: string;
    color?: string;
  }>;
  
  // ì°¨íŠ¸ ì„¤ì •
  charts: Array<{
    type: 'pie' | 'bar' | 'line' | 'heatmap' | 'cloud';
    title: string;
    dataSource: 'category' | 'time' | 'emotion' | 'tags' | 'persona';
    timeRange: 'day' | 'week' | 'month' | 'year' | 'all';
    position: { row: number; col: number; span: number };
  }>;
  
  // í•„í„°
  filters: {
    timeRange: { start?: number; end?: number };
    personas?: string[];
    tags?: string[];
    nature?: string[];
  };
  
  // ì—…ë°ì´íŠ¸
  autoRefresh: boolean;
  refreshInterval: number;  // ì´ˆ ë‹¨ìœ„
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/StatsBlock.tsx
import { PieChart, BarChart, LineChart, Cell } from 'recharts';

export default function StatsBlock({
  blockId,
  config,
  memories,
  onUpdate,
}: StatsBlockProps) {
  // ë©”íŠ¸ë¦­ ê³„ì‚°
  const metrics = useMemo(() => {
    return config.metrics.map(metric => {
      switch (metric.type) {
        case 'count':
          return {
            ...metric,
            value: filteredMemories.length,
          };
        case 'average':
          return {
            ...metric,
            value: calculateAverage(filteredMemories, config.filters.timeRange),
          };
        case 'peak':
          return {
            ...metric,
            value: findPeakTime(filteredMemories),
          };
        // ...
      }
    });
  }, [config, memories]);
  
  // ì°¨íŠ¸ ë°ì´í„° ì¤€ë¹„
  const chartData = useMemo(() => {
    return config.charts.map(chart => {
      switch (chart.type) {
        case 'pie':
          return preparePieData(filteredMemories, chart.dataSource);
        case 'bar':
          return prepareBarData(filteredMemories, chart.dataSource);
        // ...
      }
    });
  }, [config, memories]);
  
  // ìë™ ìƒˆë¡œê³ ì¹¨
  useEffect(() => {
    if (!config.autoRefresh) return;
    const interval = setInterval(() => {
      // ë°ì´í„° ë‹¤ì‹œ ê³„ì‚°
      refreshData();
    }, config.refreshInterval * 1000);
    return () => clearInterval(interval);
  }, [config]);
  
  return (
    <div className="stats-block">
      {/* ë©”íŠ¸ë¦­ ì¹´ë“œ */}
      <div className="metrics-grid">
        {metrics.map(metric => (
          <MetricCard key={metric.type} {...metric} />
        ))}
      </div>
      
      {/* ì°¨íŠ¸ */}
      <div className="charts-grid">
        {config.charts.map((chart, index) => (
          <ChartContainer key={index} chart={chart} data={chartData[index]}>
            {chart.type === 'pie' && <PieChart data={chartData[index]} />}
            {chart.type === 'bar' && <BarChart data={chartData[index]} />}
            {chart.type === 'line' && <LineChart data={chartData[index]} />}
            {/* ... */}
          </ChartContainer>
        ))}
      </div>
    </div>
  );
}
```

#### ë°ì´í„° ì²˜ë¦¬ í•¨ìˆ˜
```typescript
// lib/statsUtils.ts
export function preparePieData(
  memories: Memory[],
  dataSource: string
): PieData[] {
  const grouped = groupBy(memories, dataSource);
  return Object.entries(grouped).map(([key, items]) => ({
    name: key,
    value: items.length,
    percentage: (items.length / memories.length) * 100,
  }));
}

export function prepareBarData(
  memories: Memory[],
  dataSource: string
): BarData[] {
  // ì‹œê°„ëŒ€ë³„, ìš”ì¼ë³„ ë“±ìœ¼ë¡œ ê·¸ë£¹í™”
  const grouped = groupByTime(memories, dataSource);
  return Object.entries(grouped).map(([time, items]) => ({
    time,
    count: items.length,
  }));
}

export function findPeakTime(memories: Memory[]): string {
  const hourly = groupByHour(memories);
  const maxHour = Object.entries(hourly)
    .sort(([, a], [, b]) => b.length - a.length)[0][0];
  return `${maxHour}ì‹œ`;
}
```

---

## 4. ğŸ” ê²€ìƒ‰ ìœ„ì ¯ (Search Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ìº”ë²„ìŠ¤ì— ê³ ì •ëœ ê²€ìƒ‰ì°½ìœ¼ë¡œ ë¹ ë¥´ê²Œ ë©”ëª¨ë¦¬ë¥¼ ì°¾ê³ , ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë°”ë¡œ í™•ì¸.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 4.1 ê²€ìƒ‰ ê¸°ëŠ¥
- **ì‹¤ì‹œê°„ ê²€ìƒ‰**: íƒ€ì´í•‘ ì¦‰ì‹œ ê²°ê³¼ í‘œì‹œ
- **ê³ ê¸‰ ê²€ìƒ‰**: AND/OR ì—°ì‚°ì ì§€ì›
- **íƒœê·¸ ê²€ìƒ‰**: `#íƒœê·¸` í˜•ì‹
- **ë‚ ì§œ ê²€ìƒ‰**: `date:2024-01-01` í˜•ì‹
- **í˜ë¥´ì†Œë‚˜ ê²€ìƒ‰**: `persona:ì—…ë¬´` í˜•ì‹

#### 4.2 ê²€ìƒ‰ ê²°ê³¼
- **ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°**: ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì¹´ë“œë¡œ í‘œì‹œ
- **í•˜ì´ë¼ì´íŠ¸**: ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŠ¸
- **ì •ë ¬**: ê´€ë ¨ë„/ë‚ ì§œ/ì œëª© ì •ë ¬
- **í•„í„°**: ê²°ê³¼ì—ì„œ ì¶”ê°€ í•„í„°ë§
- **ë¹ ë¥¸ ì•¡ì…˜**: í´ë¦­ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¡œ ì´ë™

#### 4.3 ê²€ìƒ‰ íˆìŠ¤í† ë¦¬
- **ìµœê·¼ ê²€ìƒ‰**: ìµœê·¼ ê²€ìƒ‰ì–´ ì €ì¥
- **ì €ì¥ëœ ê²€ìƒ‰**: ìì£¼ ì“°ëŠ” ê²€ìƒ‰ ì €ì¥
- **ìë™ì™„ì„±**: ê²€ìƒ‰ì–´ ì œì•ˆ

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” ê²€ìƒ‰                    [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ” ì•„ì´ë””ì–´ ê²€ìƒ‰...]  [ê³ ê¸‰ ê²€ìƒ‰ â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ“ ì•„ì´ë””ì–´ í”„ë¡œì íŠ¸                    â”‚
â”‚     "ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´ë¥¼..."      â”‚
â”‚     [ë³´ê¸°] [ì—°ê²°]                       â”‚
â”‚                                         â”‚
â”‚  ğŸ“ ì•„ì´ë””ì–´ ì •ë¦¬                       â”‚
â”‚     "ì˜¤ëŠ˜ ìƒê°í•œ ì•„ì´ë””ì–´ë“¤ì„..."        â”‚
â”‚     [ë³´ê¸°] [ì—°ê²°]                       â”‚
â”‚                                         â”‚
â”‚  ğŸ“ ì•„ì´ë””ì–´ íšŒì˜                        â”‚
â”‚     "íŒ€ íšŒì˜ì—ì„œ ë‚˜ì˜¨ ì•„ì´ë””ì–´..."       â”‚
â”‚     [ë³´ê¸°] [ì—°ê²°]                       â”‚
â”‚                                         â”‚
â”‚  [ë” ë³´ê¸° (12ê°œ)]                       â”‚
â”‚                                         â”‚
â”‚  ìµœê·¼ ê²€ìƒ‰:                             â”‚
â”‚  #í”„ë¡œì íŠ¸  ì—…ë¬´  ì˜¤ëŠ˜                   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface SearchBlockConfig {
  id: string;
  type: 'search';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ê²€ìƒ‰ ì„¤ì •
  placeholder: string;
  maxResults: number;
  showHistory: boolean;
  autoComplete: boolean;
  
  // í•„í„° ì˜µì…˜
  defaultFilters: {
    dateRange?: { start?: number; end?: number };
    personas?: string[];
    tags?: string[];
  };
  
  // ê²°ê³¼ í‘œì‹œ
  resultLayout: 'list' | 'grid' | 'compact';
  showPreview: boolean;
  highlightQuery: boolean;
  
  // ì €ì¥ëœ ê²€ìƒ‰
  savedSearches: Array<{
    id: string;
    name: string;
    query: string;
    filters: any;
  }>;
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/SearchBlock.tsx
import { useDebounce } from '@/hooks/useDebounce';
import Fuse from 'fuse.js';

export default function SearchBlock({
  blockId,
  config,
  memories,
  onUpdate,
}: SearchBlockProps) {
  const [query, setQuery] = useState('');
  const [results, setResults] = useState<Memory[]>([]);
  const [history, setHistory] = useState<string[]>([]);
  
  // Fuse.jsë¡œ í¼ì§€ ê²€ìƒ‰
  const fuse = useMemo(() => {
    return new Fuse(memories, {
      keys: ['title', 'content', 'tags', 'nature'],
      threshold: 0.3,
      includeScore: true,
    });
  }, [memories]);
  
  // ë””ë°”ìš´ìŠ¤ëœ ê²€ìƒ‰
  const debouncedQuery = useDebounce(query, 300);
  
  useEffect(() => {
    if (!debouncedQuery.trim()) {
      setResults([]);
      return;
    }
    
    // ê²€ìƒ‰ ì‹¤í–‰
    const searchResults = fuse.search(debouncedQuery);
    setResults(searchResults.slice(0, config.maxResults).map(r => r.item));
    
    // íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
    if (debouncedQuery && !history.includes(debouncedQuery)) {
      setHistory(prev => [debouncedQuery, ...prev.slice(0, 9)]);
    }
  }, [debouncedQuery, fuse, config.maxResults]);
  
  // ê³ ê¸‰ ê²€ìƒ‰ íŒŒì‹±
  const parseAdvancedQuery = (q: string) => {
    const parts = {
      text: '',
      tags: [] as string[],
      date: null as { start?: number; end?: number } | null,
      persona: null as string | null,
    };
    
    // #íƒœê·¸ ì¶”ì¶œ
    const tagMatches = q.match(/#(\w+)/g);
    if (tagMatches) {
      parts.tags = tagMatches.map(t => t.slice(1));
      q = q.replace(/#\w+/g, '').trim();
    }
    
    // date: ì¶”ì¶œ
    const dateMatch = q.match(/date:(\d{4}-\d{2}-\d{2})/);
    if (dateMatch) {
      parts.date = { start: new Date(dateMatch[1]).getTime() };
      q = q.replace(/date:\d{4}-\d{2}-\d{2}/g, '').trim();
    }
    
    // persona: ì¶”ì¶œ
    const personaMatch = q.match(/persona:(\w+)/);
    if (personaMatch) {
      parts.persona = personaMatch[1];
      q = q.replace(/persona:\w+/g, '').trim();
    }
    
    parts.text = q;
    return parts;
  };
  
  return (
    <div className="search-block">
      {/* ê²€ìƒ‰ ì…ë ¥ */}
      <div className="search-input-container">
        <input
          type="text"
          value={query}
          onChange={(e) => setQuery(e.target.value)}
          placeholder={config.placeholder}
          className="search-input"
        />
        {config.autoComplete && (
          <AutocompleteSuggestions
            query={query}
            memories={memories}
            onSelect={(suggestion) => setQuery(suggestion)}
          />
        )}
      </div>
      
      {/* ê²€ìƒ‰ ê²°ê³¼ */}
      {results.length > 0 && (
        <div className="search-results">
          {results.map(memory => (
            <SearchResultCard
              key={memory.id}
              memory={memory}
              query={query}
              highlight={config.highlightQuery}
              onClick={() => handleMemoryClick(memory.id)}
            />
          ))}
        </div>
      )}
      
      {/* ê²€ìƒ‰ íˆìŠ¤í† ë¦¬ */}
      {config.showHistory && history.length > 0 && (
        <div className="search-history">
          <div className="history-label">ìµœê·¼ ê²€ìƒ‰:</div>
          {history.map((term, index) => (
            <button
              key={index}
              onClick={() => setQuery(term)}
              className="history-item"
            >
              {term}
            </button>
          ))}
        </div>
      )}
      
      {/* ì €ì¥ëœ ê²€ìƒ‰ */}
      {config.savedSearches.length > 0 && (
        <div className="saved-searches">
          {config.savedSearches.map(saved => (
            <button
              key={saved.id}
              onClick={() => {
                setQuery(saved.query);
                // í•„í„° ì ìš©
              }}
              className="saved-search-item"
            >
              {saved.name}
            </button>
          ))}
        </div>
      )}
    </div>
  );
}
```

---

## 5. ğŸ¯ ëª©í‘œ ì¶”ì  ìœ„ì ¯ (Goal Tracker Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ëª©í‘œ(Goal)ì˜ ì§„í–‰ ìƒí™©ì„ ì‹œê°í™”í•˜ê³ , ê´€ë ¨ ë©”ëª¨ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ì—°ê²°í•˜ì—¬ ëª©í‘œ ë‹¬ì„± ê³¼ì •ì„ ì¶”ì .

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 5.1 ëª©í‘œ í‘œì‹œ
- **ëª©í‘œ ì¹´ë“œ**: ëª©í‘œë³„ ì¹´ë“œ í‘œì‹œ
- **ì§„í–‰ë¥  ë°”**: 0-100% ì§„í–‰ë¥  ì‹œê°í™”
- **ë§ˆì¼ìŠ¤í†¤**: ì²´í¬ë¦¬ìŠ¤íŠ¸ í˜•íƒœ
- **ë‚¨ì€ ì‹œê°„**: ë°ë“œë¼ì¸ê¹Œì§€ ë‚¨ì€ ì‹œê°„
- **ìƒíƒœ í‘œì‹œ**: í™œì„±/ì™„ë£Œ/ë³´ê´€

#### 5.2 ë©”ëª¨ë¦¬ ì—°ê²°
- **ìë™ ì—°ê²°**: ëª©í‘œ ê´€ë ¨ ë©”ëª¨ë¦¬ ìë™ ê°ì§€
- **ìˆ˜ë™ ì—°ê²°**: ë“œë˜ê·¸ë¡œ ë©”ëª¨ë¦¬ ì—°ê²°
- **ì—°ê²° í‘œì‹œ**: ê´€ë ¨ ë©”ëª¨ë¦¬ ëª©ë¡
- **ì§„í–‰ ì—…ë°ì´íŠ¸**: ë©”ëª¨ë¦¬ ì‘ì„± ì‹œ ì§„í–‰ë¥  ìë™ ì—…ë°ì´íŠ¸

#### 5.3 ì•¡ì…˜
- **ë§ˆì¼ìŠ¤í†¤ ì²´í¬**: ì™„ë£Œ í‘œì‹œ
- **ì§„í–‰ë¥  ìˆ˜ì •**: ìˆ˜ë™ìœ¼ë¡œ ì§„í–‰ë¥  ì¡°ì •
- **ëª©í‘œ í¸ì§‘**: ì œëª©/ì„¤ëª…/ë°ë“œë¼ì¸ ìˆ˜ì •
- **ëª©í‘œ ì™„ë£Œ**: ì™„ë£Œ ì²˜ë¦¬

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ ëª©í‘œ ì¶”ì                 [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ“š ì±… ì½ê¸° ìŠµê´€ ë§Œë“¤ê¸°                  â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  60%             â”‚
â”‚  ğŸ“… 2024.12.31ê¹Œì§€                       â”‚
â”‚                                         â”‚
â”‚  âœ“ ì£¼ 1ê¶Œ ì½ê¸°                          â”‚
â”‚  âœ“ ë…ì„œ ë…¸íŠ¸ ì‘ì„±                        â”‚
â”‚  â˜ 10ê¶Œ ì™„ë…                            â”‚
â”‚  â˜ ë…ì„œ ëª¨ì„ ì°¸ì—¬                        â”‚
â”‚                                         â”‚
â”‚  ê´€ë ¨ ë©”ëª¨ë¦¬ (5ê°œ):                      â”‚
â”‚  ğŸ“ ì˜¤ëŠ˜ ì½ì€ ì±…...  [ë³´ê¸°]              â”‚
â”‚  ğŸ“ ë…ì„œ ë…¸íŠ¸ ì •ë¦¬... [ë³´ê¸°]             â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                         â”‚
â”‚  ğŸ’¼ í”„ë¡œì íŠ¸ ì™„ë£Œ                        â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100% âœ“          â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface GoalTrackerBlockConfig {
  id: string;
  type: 'goal-tracker';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ëª©í‘œ ì„¤ì •
  goalIds: string[];  // í‘œì‹œí•  ëª©í‘œ IDë“¤
  showCompleted: boolean;  // ì™„ë£Œëœ ëª©í‘œ í‘œì‹œ
  showArchived: boolean;   // ë³´ê´€ëœ ëª©í‘œ í‘œì‹œ
  
  // í‘œì‹œ ì˜µì…˜
  showProgress: boolean;
  showMilestones: boolean;
  showRelatedMemories: boolean;
  showDeadline: boolean;
  
  // ë ˆì´ì•„ì›ƒ
  layout: 'list' | 'grid' | 'timeline';
  cardSize: 'small' | 'medium' | 'large';
  
  // ìë™ ì—…ë°ì´íŠ¸
  autoLinkMemories: boolean;
  autoUpdateProgress: boolean;
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/GoalTrackerBlock.tsx
export default function GoalTrackerBlock({
  blockId,
  config,
  goals,
  memories,
  onUpdate,
}: GoalTrackerBlockProps) {
  // ëª©í‘œ í•„í„°ë§
  const displayedGoals = useMemo(() => {
    return goals.filter(goal => {
      if (config.goalIds.length > 0 && !config.goalIds.includes(goal.id)) {
        return false;
      }
      if (goal.status === 'completed' && !config.showCompleted) {
        return false;
      }
      if (goal.status === 'archived' && !config.showArchived) {
        return false;
      }
      return true;
    });
  }, [goals, config]);
  
  // ëª©í‘œë³„ ê´€ë ¨ ë©”ëª¨ë¦¬ ì°¾ê¸°
  const goalMemories = useMemo(() => {
    const map = new Map<string, Memory[]>();
    displayedGoals.forEach(goal => {
      const related = memories.filter(m => 
        goal.sourceMemoryIds.includes(m.id) ||
        (config.autoLinkMemories && isMemoryRelatedToGoal(m, goal))
      );
      map.set(goal.id, related);
    });
    return map;
  }, [displayedGoals, memories, config]);
  
  // ì§„í–‰ë¥  ê³„ì‚°
  const calculateProgress = (goal: Goal): number => {
    if (goal.milestones && goal.milestones.length > 0) {
      const completed = goal.milestones.filter(m => m.completed).length;
      return (completed / goal.milestones.length) * 100;
    }
    return goal.progress;
  };
  
  return (
    <div className="goal-tracker-block">
      {displayedGoals.map(goal => {
        const progress = calculateProgress(goal);
        const relatedMemories = goalMemories.get(goal.id) || [];
        const daysLeft = goal.targetDate
          ? Math.ceil((goal.targetDate - Date.now()) / (1000 * 60 * 60 * 24))
          : null;
        
        return (
          <GoalCard
            key={goal.id}
            goal={goal}
            progress={progress}
            daysLeft={daysLeft}
            relatedMemories={relatedMemories}
            showProgress={config.showProgress}
            showMilestones={config.showMilestones}
            showRelatedMemories={config.showRelatedMemories}
            showDeadline={config.showDeadline}
            onMilestoneToggle={(milestoneId) => {
              handleMilestoneToggle(goal.id, milestoneId);
            }}
            onProgressUpdate={(newProgress) => {
              handleProgressUpdate(goal.id, newProgress);
            }}
            onMemoryClick={(memoryId) => {
              handleMemoryClick(memoryId);
            }}
          />
        );
      })}
    </div>
  );
}
```

#### ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
```typescript
// lib/goalUtils.ts
export function isMemoryRelatedToGoal(
  memory: Memory,
  goal: Goal
): boolean {
  // ì œëª©/ë‚´ìš©ì—ì„œ ëª©í‘œ í‚¤ì›Œë“œ ë§¤ì¹­
  const goalKeywords = extractKeywords(goal.title, goal.description);
  const memoryText = `${memory.title} ${memory.content}`.toLowerCase();
  
  return goalKeywords.some(keyword =>
    memoryText.includes(keyword.toLowerCase())
  );
}

export function extractKeywords(...texts: string[]): string[] {
  // ê°„ë‹¨í•œ í‚¤ì›Œë“œ ì¶”ì¶œ (ì‹¤ì œë¡œëŠ” NLP ì‚¬ìš© ê°€ëŠ¥)
  const allText = texts.join(' ');
  const words = allText.split(/\s+/).filter(w => w.length > 2);
  return [...new Set(words)];
}
```

---

## 6. ğŸ¨ ìŠ¤í‹°ì»¤/ë…¸íŠ¸ ìœ„ì ¯ (Sticky Note Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ë¹ ë¥¸ ë©”ëª¨ë¥¼ ìœ„í•œ ë¯¸ë‹ˆë©€í•œ ìŠ¤í‹°ì»¤ ë…¸íŠ¸. ë©”ëª¨ë¦¬ë³´ë‹¤ ê°€ë³ê³  ë¹ ë¥´ê²Œ ì‘ì„±.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 6.1 ë¹ ë¥¸ ì‘ì„±
- **ì›í´ë¦­ ìƒì„±**: í´ë¦­ìœ¼ë¡œ ì¦‰ì‹œ ìƒì„±
- **ì¸ë¼ì¸ í¸ì§‘**: ë”ë¸”í´ë¦­ìœ¼ë¡œ ë°”ë¡œ í¸ì§‘
- **ìë™ ì €ì¥**: ì…ë ¥ ì¦‰ì‹œ ì €ì¥
- **ìµœì†Œ UI**: ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ë§Œ

#### 6.2 ìŠ¤íƒ€ì¼
- **ìƒ‰ìƒ ì„ íƒ**: 8ê°€ì§€ ìƒ‰ìƒ
- **í¬ê¸° ì¡°ì ˆ**: S/M/L 3ë‹¨ê³„
- **í°íŠ¸ í¬ê¸°**: ì‘ê²Œ/ë³´í†µ/í¬ê²Œ
- **íˆ¬ëª…ë„**: ë°˜íˆ¬ëª… íš¨ê³¼

#### 6.3 ë³€í™˜
- **ë©”ëª¨ë¦¬ë¡œ ë³€í™˜**: ìŠ¤í‹°ì»¤ë¥¼ ë©”ëª¨ë¦¬ë¡œ ì „í™˜
- **ì—°ê²°**: ë‹¤ë¥¸ ë©”ëª¨ë¦¬/ìŠ¤í‹°ì»¤ì™€ ì—°ê²°
- **ê·¸ë£¹í™”**: ì—¬ëŸ¬ ìŠ¤í‹°ì»¤ë¥¼ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ê¸°

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ ìŠ¤í‹°ì»¤    â”‚
â”‚             â”‚
â”‚ ë¹ ë¥¸ ì•„ì´ë””ì–´â”‚
â”‚ ë©”ëª¨        â”‚
â”‚             â”‚
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface StickyNoteBlockConfig {
  id: string;
  type: 'sticky-note';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ë‚´ìš©
  content: string;
  color: 'yellow' | 'pink' | 'blue' | 'green' | 'purple' | 'orange' | 'red' | 'gray';
  
  // ìŠ¤íƒ€ì¼
  fontSize: 'small' | 'medium' | 'large';
  opacity: number;  // 0-1
  
  // ë³€í™˜
  convertedToMemoryId?: string;  // ë©”ëª¨ë¦¬ë¡œ ë³€í™˜ëœ ê²½ìš°
  linkedNoteIds: string[];  // ì—°ê²°ëœ ë‹¤ë¥¸ ë…¸íŠ¸ë“¤
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/StickyNoteBlock.tsx
export default function StickyNoteBlock({
  blockId,
  config,
  onUpdate,
  onDelete,
  onConvert,
}: StickyNoteBlockProps) {
  const [isEditing, setIsEditing] = useState(false);
  const [content, setContent] = useState(config.content);
  const textareaRef = useRef<HTMLTextAreaElement>(null);
  
  // ë”ë¸”í´ë¦­ìœ¼ë¡œ í¸ì§‘ ì‹œì‘
  const handleDoubleClick = () => {
    setIsEditing(true);
    setTimeout(() => textareaRef.current?.focus(), 0);
  };
  
  // ìë™ ì €ì¥
  const handleBlur = () => {
    setIsEditing(false);
    if (content !== config.content) {
      onUpdate(blockId, { config: { ...config, content } });
    }
  };
  
  // ë©”ëª¨ë¦¬ë¡œ ë³€í™˜
  const handleConvert = async () => {
    const memory = await createMemoryFromNote(config);
    onConvert(blockId, memory.id);
  };
  
  const colorClasses = {
    yellow: 'bg-yellow-200 border-yellow-300',
    pink: 'bg-pink-200 border-pink-300',
    blue: 'bg-blue-200 border-blue-300',
    green: 'bg-green-200 border-green-300',
    purple: 'bg-purple-200 border-purple-300',
    orange: 'bg-orange-200 border-orange-300',
    red: 'bg-red-200 border-red-300',
    gray: 'bg-gray-200 border-gray-300',
  };
  
  return (
    <div
      className={`sticky-note ${colorClasses[config.color]}`}
      style={{
        opacity: config.opacity,
        fontSize: config.fontSize === 'small' ? '12px' : 
                  config.fontSize === 'large' ? '16px' : '14px',
      }}
      onDoubleClick={handleDoubleClick}
    >
      {isEditing ? (
        <textarea
          ref={textareaRef}
          value={content}
          onChange={(e) => setContent(e.target.value)}
          onBlur={handleBlur}
          className="sticky-note-textarea"
          autoFocus
        />
      ) : (
        <div className="sticky-note-content">
          {content || <span className="placeholder">ë”ë¸”í´ë¦­í•˜ì—¬ ì‘ì„±...</span>}
        </div>
      )}
      
      {/* ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ */}
      <div className="sticky-note-menu">
        <button onClick={handleConvert}>ğŸ“ ë©”ëª¨ë¦¬ë¡œ</button>
        <button onClick={() => onDelete(blockId)}>ğŸ—‘ï¸ ì‚­ì œ</button>
      </div>
    </div>
  );
}
```

---

## 7. ğŸ”— ë§í¬ ì»¬ë ‰ì…˜ ìœ„ì ¯ (Link Collection Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ë¶ë§ˆí¬ì™€ ì›¹ ë§í¬ë¥¼ ëª¨ì•„ì„œ ê´€ë¦¬í•˜ê³ , ë©”ëª¨ë¦¬ì™€ ì—°ê²°í•˜ì—¬ ì°¸ê³  ìë£Œë¡œ í™œìš©.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 7.1 ë§í¬ ê´€ë¦¬
- **ë§í¬ ì¶”ê°€**: URL ì…ë ¥ ë˜ëŠ” ë“œë˜ê·¸ ì•¤ ë“œë¡­
- **ë¯¸ë¦¬ë³´ê¸°**: og:image, ì œëª©, ì„¤ëª… ìë™ ì¶”ì¶œ
- **ì¹´í…Œê³ ë¦¬**: íƒœê·¸/í´ë”ë¡œ ë¶„ë¥˜
- **ê²€ìƒ‰**: ë§í¬ ë‚´ ê²€ìƒ‰
- **ì •ë ¬**: ë‚ ì§œ/ì œëª©/ë°©ë¬¸ íšŸìˆ˜

#### 7.2 ë©”ëª¨ë¦¬ ì—°ê²°
- **ìë™ ì—°ê²°**: ë©”ëª¨ë¦¬ ë‚´ìš©ì—ì„œ URL ì¶”ì¶œ
- **ìˆ˜ë™ ì—°ê²°**: ë“œë˜ê·¸ë¡œ ë©”ëª¨ë¦¬ì™€ ì—°ê²°
- **ì—°ê²° í‘œì‹œ**: ë©”ëª¨ë¦¬ì—ì„œ ê´€ë ¨ ë§í¬ ë³´ê¸°

#### 7.3 ë·°ì–´ ì—°ë™
- **ë·°ì–´ ì—´ê¸°**: ë§í¬ í´ë¦­ ì‹œ ë·°ì–´ ë¸”ë¡ì—ì„œ ì—´ê¸°
- **íˆìŠ¤í† ë¦¬**: ë°©ë¬¸í•œ ë§í¬ ê¸°ë¡
- **ì˜¤í”„ë¼ì¸**: ìºì‹œëœ ì½˜í…ì¸  ì˜¤í”„ë¼ì¸ ë³´ê¸°

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”— ë§í¬ ì»¬ë ‰ì…˜              [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+ ë§í¬ ì¶”ê°€]  [ğŸ” ê²€ìƒ‰...]  [íƒœê·¸ â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ì´ë¯¸ì§€]                         â”‚   â”‚
â”‚  â”‚                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ğŸ“„ React ê³µì‹ ë¬¸ì„œ                      â”‚
â”‚  https://react.dev                      â”‚
â”‚  ì°¸ê³  ìë£Œ, í”„ë¡ íŠ¸ì—”ë“œ                   â”‚
â”‚  [ì—´ê¸°] [ì—°ê²°] [ì‚­ì œ]                   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ì´ë¯¸ì§€]                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ğŸ“„ TypeScript ê°€ì´ë“œ                   â”‚
â”‚  https://typescriptlang.org            â”‚
â”‚  í•™ìŠµ, ì°¸ê³  ìë£Œ                        â”‚
â”‚  [ì—´ê¸°] [ì—°ê²°] [ì‚­ì œ]                   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface LinkCollectionBlockConfig {
  id: string;
  type: 'link-collection';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ë§í¬ ëª©ë¡
  links: Array<{
    id: string;
    url: string;
    title: string;
    description?: string;
    image?: string;
    tags: string[];
    createdAt: number;
    visitCount: number;
    lastVisited?: number;
    linkedMemoryIds: string[];
  }>;
  
  // í‘œì‹œ ì˜µì…˜
  layout: 'list' | 'grid' | 'compact';
  showPreview: boolean;
  showTags: boolean;
  showVisitCount: boolean;
  
  // í•„í„°
  filterByTag?: string;
  searchQuery?: string;
  
  // ìë™ ìˆ˜ì§‘
  autoCollectFromMemories: boolean;
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/LinkCollectionBlock.tsx
export default function LinkCollectionBlock({
  blockId,
  config,
  memories,
  onUpdate,
}: LinkCollectionBlockProps) {
  // ë©”ëª¨ë¦¬ì—ì„œ URL ì¶”ì¶œ
  useEffect(() => {
    if (!config.autoCollectFromMemories) return;
    
    const extractUrls = (text: string): string[] => {
      const urlRegex = /(https?:\/\/[^\s]+)/g;
      return text.match(urlRegex) || [];
    };
    
    const newUrls: string[] = [];
    memories.forEach(memory => {
      const urls = extractUrls(memory.content);
      urls.forEach(url => {
        if (!config.links.some(l => l.url === url)) {
          newUrls.push(url);
        }
      });
    });
    
    if (newUrls.length > 0) {
      // URL ë©”íƒ€ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
      fetchLinkMetadata(newUrls).then(metadata => {
        const newLinks = metadata.map(meta => ({
          id: generateId(),
          url: meta.url,
          title: meta.title,
          description: meta.description,
          image: meta.image,
          tags: [],
          createdAt: Date.now(),
          visitCount: 0,
          linkedMemoryIds: [],
        }));
        
        onUpdate(blockId, {
          config: {
            ...config,
            links: [...config.links, ...newLinks],
          },
        });
      });
    }
  }, [memories, config, blockId, onUpdate]);
  
  // ë§í¬ ë¯¸ë¦¬ë³´ê¸°
  const fetchLinkMetadata = async (urls: string[]): Promise<LinkMetadata[]> => {
    // ì„œë²„ APIë¡œ ë©”íƒ€ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    const res = await fetch('/api/links/metadata', {
      method: 'POST',
      body: JSON.stringify({ urls }),
    });
    return res.json();
  };
  
  // í•„í„°ë§ëœ ë§í¬
  const filteredLinks = useMemo(() => {
    let links = config.links;
    
    if (config.filterByTag) {
      links = links.filter(l => l.tags.includes(config.filterByTag));
    }
    
    if (config.searchQuery) {
      const query = config.searchQuery.toLowerCase();
      links = links.filter(l =>
        l.title.toLowerCase().includes(query) ||
        l.description?.toLowerCase().includes(query) ||
        l.url.toLowerCase().includes(query)
      );
    }
    
    return links;
  }, [config]);
  
  return (
    <div className="link-collection-block">
      {/* í—¤ë” */}
      <div className="link-collection-header">
        <button onClick={handleAddLink}>+ ë§í¬ ì¶”ê°€</button>
        <input
          type="text"
          placeholder="ğŸ” ê²€ìƒ‰..."
          value={config.searchQuery || ''}
          onChange={(e) => handleSearch(e.target.value)}
        />
        <select
          value={config.filterByTag || ''}
          onChange={(e) => handleFilterByTag(e.target.value)}
        >
          <option value="">ëª¨ë“  íƒœê·¸</option>
          {getAllTags(config.links).map(tag => (
            <option key={tag} value={tag}>{tag}</option>
          ))}
        </select>
      </div>
      
      {/* ë§í¬ ëª©ë¡ */}
      <div className={`link-list ${config.layout}`}>
        {filteredLinks.map(link => (
          <LinkCard
            key={link.id}
            link={link}
            showPreview={config.showPreview}
            showTags={config.showTags}
            showVisitCount={config.showVisitCount}
            onOpen={() => handleOpenLink(link)}
            onConnect={() => handleConnectToMemory(link)}
            onDelete={() => handleDeleteLink(link.id)}
          />
        ))}
      </div>
    </div>
  );
}
```

#### API ì—”ë“œí¬ì¸íŠ¸
```typescript
// app/api/links/metadata/route.ts
export async function POST(req: Request) {
  const { urls } = await req.json();
  
  const metadata = await Promise.all(
    urls.map(async (url: string) => {
      try {
        // og: íƒœê·¸ ì¶”ì¶œ
        const response = await fetch(url);
        const html = await response.text();
        const $ = cheerio.load(html);
        
        return {
          url,
          title: $('meta[property="og:title"]').attr('content') || $('title').text(),
          description: $('meta[property="og:description"]').attr('content') || '',
          image: $('meta[property="og:image"]').attr('content') || '',
        };
      } catch (error) {
        return { url, title: url, description: '', image: '' };
      }
    })
  );
  
  return Response.json(metadata);
}
```

---

## 8. ğŸµ ë¯¸ë””ì–´ ê°¤ëŸ¬ë¦¬ ìœ„ì ¯ (Media Gallery Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ì´ë¯¸ì§€ì™€ ë¹„ë””ì˜¤ë¥¼ ê°¤ëŸ¬ë¦¬ í˜•íƒœë¡œ ëª¨ì•„ì„œ ë³´ì—¬ì£¼ê³ , ë©”ëª¨ë¦¬ ì²¨ë¶€íŒŒì¼ì„ ìë™ìœ¼ë¡œ ìˆ˜ì§‘.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 8.1 ê°¤ëŸ¬ë¦¬ ë·°
- **ê·¸ë¦¬ë“œ ë·°**: ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ
- **ë¦¬ìŠ¤íŠ¸ ë·°**: ìƒì„¸ ì •ë³´ì™€ í•¨ê»˜
- **ë¼ì´íŠ¸ë°•ìŠ¤**: í´ë¦­ ì‹œ ì „ì²´ í™”ë©´ ë³´ê¸°
- **ìŠ¬ë¼ì´ë“œì‡¼**: ìë™ ì¬ìƒ
- **ì¤Œ**: ì´ë¯¸ì§€ í™•ëŒ€

#### 8.2 ë¯¸ë””ì–´ ê´€ë¦¬
- **ìë™ ìˆ˜ì§‘**: ë©”ëª¨ë¦¬ ì²¨ë¶€íŒŒì¼ ìë™ ì¶”ê°€
- **ìˆ˜ë™ ì¶”ê°€**: ë“œë˜ê·¸ ì•¤ ë“œë¡­
- **íƒœê·¸**: ë¯¸ë””ì–´ë³„ íƒœê·¸ ì¶”ê°€
- **ê²€ìƒ‰**: íƒœê·¸/ë‚ ì§œë¡œ ê²€ìƒ‰
- **ì •ë ¬**: ë‚ ì§œ/ì´ë¦„/í¬ê¸°

#### 8.3 ë©”ëª¨ë¦¬ ì—°ê²°
- **ì›ë³¸ ë©”ëª¨ë¦¬**: ë¯¸ë””ì–´ê°€ ì²¨ë¶€ëœ ë©”ëª¨ë¦¬ë¡œ ì´ë™
- **ì—°ê²° í‘œì‹œ**: ê´€ë ¨ ë©”ëª¨ë¦¬ ëª©ë¡
- **ë©”íƒ€ë°ì´í„°**: ì´¬ì˜ ë‚ ì§œ, ìœ„ì¹˜ ë“±

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸµ ë¯¸ë””ì–´ ê°¤ëŸ¬ë¦¬            [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ê·¸ë¦¬ë“œ â–¼]  [ğŸ” ê²€ìƒ‰...]  [+ ì¶”ê°€]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”              â”‚
â”‚  â”‚ğŸ“· â”‚ â”‚ğŸ“· â”‚ â”‚ğŸ“· â”‚ â”‚ğŸ“· â”‚              â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜              â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”              â”‚
â”‚  â”‚ğŸ“· â”‚ â”‚ğŸ“· â”‚ â”‚ğŸ“· â”‚ â”‚ğŸ“· â”‚              â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜              â”‚
â”‚                                         â”‚
â”‚  [ë” ë³´ê¸° (24ê°œ)]                       â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface MediaGalleryBlockConfig {
  id: string;
  type: 'media-gallery';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ë¯¸ë””ì–´ ëª©ë¡
  media: Array<{
    id: string;
    type: 'image' | 'video';
    url: string;
    thumbnail?: string;
    filename: string;
    size: number;
    mimeType: string;
    createdAt: number;
    tags: string[];
    linkedMemoryIds: string[];
    metadata?: {
      width?: number;
      height?: number;
      duration?: number;  // ë¹„ë””ì˜¤
      location?: { lat: number; lng: number };
    };
  }>;
  
  // í‘œì‹œ ì˜µì…˜
  layout: 'grid' | 'list' | 'masonry';
  thumbnailSize: 'small' | 'medium' | 'large';
  showMetadata: boolean;
  showTags: boolean;
  
  // ìë™ ìˆ˜ì§‘
  autoCollectFromMemories: boolean;
  mediaTypes: ('image' | 'video' | 'audio' | 'document')[];
  
  // í•„í„°
  filterByTag?: string;
  searchQuery?: string;
  dateRange?: { start?: number; end?: number };
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/MediaGalleryBlock.tsx
export default function MediaGalleryBlock({
  blockId,
  config,
  memories,
  onUpdate,
}: MediaGalleryBlockProps) {
  // ë©”ëª¨ë¦¬ì—ì„œ ë¯¸ë””ì–´ ìˆ˜ì§‘
  useEffect(() => {
    if (!config.autoCollectFromMemories) return;
    
    const collectMedia = () => {
      const newMedia: MediaItem[] = [];
      
      memories.forEach(memory => {
        memory.attachments?.forEach(attachment => {
          if (config.mediaTypes.includes(getMediaType(attachment.mimetype))) {
            if (!config.media.find(m => m.url === attachment.filepath)) {
              newMedia.push({
                id: generateId(),
                type: getMediaType(attachment.mimetype) as 'image' | 'video',
                url: attachment.filepath,
                filename: attachment.filename,
                size: attachment.size,
                mimeType: attachment.mimetype,
                createdAt: attachment.createdAt,
                tags: [],
                linkedMemoryIds: [memory.id],
              });
            }
          }
        });
      });
      
      if (newMedia.length > 0) {
        // ì¸ë„¤ì¼ ìƒì„±
        generateThumbnails(newMedia).then(mediaWithThumbnails => {
          onUpdate(blockId, {
            config: {
              ...config,
              media: [...config.media, ...mediaWithThumbnails],
            },
          });
        });
      }
    };
    
    collectMedia();
  }, [memories, config, blockId, onUpdate]);
  
  // ë¼ì´íŠ¸ë°•ìŠ¤ ìƒíƒœ
  const [lightboxIndex, setLightboxIndex] = useState<number | null>(null);
  
  return (
    <div className="media-gallery-block">
      {/* í—¤ë” */}
      <div className="gallery-header">
        <select
          value={config.layout}
          onChange={(e) => handleLayoutChange(e.target.value)}
        >
          <option value="grid">ê·¸ë¦¬ë“œ</option>
          <option value="list">ë¦¬ìŠ¤íŠ¸</option>
          <option value="masonry">ë§¤ìŠ¨ë¦¬</option>
        </select>
        <input
          type="text"
          placeholder="ğŸ” ê²€ìƒ‰..."
          value={config.searchQuery || ''}
          onChange={(e) => handleSearch(e.target.value)}
        />
        <button onClick={handleAddMedia}>+ ì¶”ê°€</button>
      </div>
      
      {/* ê°¤ëŸ¬ë¦¬ */}
      <div className={`gallery-${config.layout}`}>
        {filteredMedia.map((item, index) => (
          <MediaThumbnail
            key={item.id}
            item={item}
            size={config.thumbnailSize}
            showMetadata={config.showMetadata}
            onClick={() => setLightboxIndex(index)}
            onTagClick={(tag) => handleFilterByTag(tag)}
            onMemoryClick={(memoryId) => handleMemoryClick(memoryId)}
          />
        ))}
      </div>
      
      {/* ë¼ì´íŠ¸ë°•ìŠ¤ */}
      {lightboxIndex !== null && (
        <Lightbox
          media={filteredMedia}
          index={lightboxIndex}
          onClose={() => setLightboxIndex(null)}
          onNext={() => setLightboxIndex((lightboxIndex + 1) % filteredMedia.length)}
          onPrev={() => setLightboxIndex((lightboxIndex - 1 + filteredMedia.length) % filteredMedia.length)}
        />
      )}
    </div>
  );
}
```

---

## 9. ğŸ¤– AI ì–´ì‹œìŠ¤í„´íŠ¸ ìœ„ì ¯ (AI Assistant Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ë¡œ AIì™€ ëŒ€í™”í•˜ë©°, í˜„ì¬ ë³´ë“œì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì´í•´í•˜ì—¬ ë„ì›€ì„ ì œê³µ.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 9.1 ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- **ëŒ€í™”ì°½**: ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ í‘œì‹œ
- **ì…ë ¥ì°½**: ì§ˆë¬¸/ìš”ì²­ ì…ë ¥
- **ë¹ ë¥¸ ì•¡ì…˜**: ìì£¼ ì“°ëŠ” ì•¡ì…˜ ë²„íŠ¼
- **ì»¨í…ìŠ¤íŠ¸ ì¸ì‹**: í˜„ì¬ ë³´ë“œì˜ ë©”ëª¨ë¦¬ ìë™ í¬í•¨

#### 9.2 AI ê¸°ëŠ¥
- **ì§ˆë¬¸ ë‹µë³€**: ë©”ëª¨ë¦¬ ê¸°ë°˜ ë‹µë³€
- **ìš”ì•½**: ì„ íƒí•œ ë©”ëª¨ë¦¬ ìš”ì•½
- **ì—°ê²° ì œì•ˆ**: ê´€ë ¨ ë©”ëª¨ë¦¬ ì°¾ê¸°
- **ê¸€ ì‘ì„±**: ì£¼ì œ ê¸°ë°˜ ê¸€ ìƒì„±
- **ì•„ì´ë””ì–´ ë°œì „**: ì•„ì´ë””ì–´ í™•ì¥

#### 9.3 ë¹ ë¥¸ ì•¡ì…˜
- "ì˜¤ëŠ˜ ìš”ì•½í•´ì¤˜"
- "ë¹„ìŠ·í•œ ìƒê° ì°¾ì•„ì¤˜"
- "ë§‰íŒ ë¶€ë¶„ ì°¾ì•„ì¤˜"
- "ì´ ì£¼ì œë¡œ ê¸€ ì¨ì¤˜"
- "ì—°ê²° ì œì•ˆí•´ì¤˜"

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AI ì–´ì‹œìŠ¤í„´íŠ¸            [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ‘¤ ì˜¤ëŠ˜ ì‘ì„±í•œ ë©”ëª¨ë¦¬ ìš”ì•½í•´ì¤˜          â”‚
â”‚                                         â”‚
â”‚  ğŸ¤– ì˜¤ëŠ˜ ì´ 12ê°œì˜ ë©”ëª¨ë¦¬ë¥¼ ì‘ì„±í•˜ì…¨ë„¤ìš”!â”‚
â”‚     ì£¼ìš” ì£¼ì œëŠ”:                        â”‚
â”‚     â€¢ í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´ (5ê°œ)           â”‚
â”‚     â€¢ íšŒì˜ë¡ (3ê°œ)                      â”‚
â”‚     â€¢ ê°œì¸ ì¼ê¸° (4ê°œ)                   â”‚
â”‚                                         â”‚
â”‚     ê°€ì¥ í™œë°œí•œ ì‹œê°„ëŒ€ëŠ” ì˜¤í›„ 2-4ì‹œì˜€ê³ ,â”‚
â”‚     í”„ë¡œì íŠ¸ ê´€ë ¨ ì•„ì´ë””ì–´ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. â”‚
â”‚                                         â”‚
â”‚  [ë¹ ë¥¸ ì•¡ì…˜]                            â”‚
â”‚  [ğŸ“Š í†µê³„] [ğŸ”— ì—°ê²°] [âœï¸ ê¸€ì“°ê¸°]        â”‚
â”‚                                         â”‚
â”‚  [ğŸ’¬ ë©”ì‹œì§€ ì…ë ¥...]                    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface AIAssistantBlockConfig {
  id: string;
  type: 'ai-assistant';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ëŒ€í™” íˆìŠ¤í† ë¦¬
  messages: Array<{
    id: string;
    role: 'user' | 'assistant';
    content: string;
    timestamp: number;
    context?: {
      memoryIds?: string[];
      action?: string;
    };
  }>;
  
  // ì„¤ì •
  model: 'gpt-4' | 'gpt-3.5' | 'claude';
  temperature: number;
  maxTokens: number;
  
  // ì»¨í…ìŠ¤íŠ¸
  includeContext: boolean;
  contextMemoryIds: string[];  // í•­ìƒ í¬í•¨í•  ë©”ëª¨ë¦¬
  autoIncludeRecent: boolean;   // ìµœê·¼ ë©”ëª¨ë¦¬ ìë™ í¬í•¨
  recentCount: number;
  
  // ë¹ ë¥¸ ì•¡ì…˜
  quickActions: Array<{
    id: string;
    label: string;
    prompt: string;
    icon?: string;
  }>;
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/AIAssistantBlock.tsx
export default function AIAssistantBlock({
  blockId,
  config,
  memories,
  onUpdate,
}: AIAssistantBlockProps) {
  const [input, setInput] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);
  
  // ì»¨í…ìŠ¤íŠ¸ ì¤€ë¹„
  const prepareContext = useCallback(() => {
    let contextMemories = memories;
    
    if (config.contextMemoryIds.length > 0) {
      contextMemories = memories.filter(m =>
        config.contextMemoryIds.includes(m.id)
      );
    }
    
    if (config.autoIncludeRecent) {
      const recent = memories
        .sort((a, b) => b.createdAt - a.createdAt)
        .slice(0, config.recentCount);
      contextMemories = [...new Set([...contextMemories, ...recent])];
    }
    
    return contextMemories.map(m => ({
      id: m.id,
      title: m.title,
      content: m.content.slice(0, 500),  // ì²˜ìŒ 500ìë§Œ
      createdAt: m.createdAt,
    }));
  }, [memories, config]);
  
  // ë©”ì‹œì§€ ì „ì†¡
  const handleSend = async () => {
    if (!input.trim() || isLoading) return;
    
    const userMessage = {
      id: generateId(),
      role: 'user' as const,
      content: input,
      timestamp: Date.now(),
    };
    
    // ë©”ì‹œì§€ ì¶”ê°€
    const updatedMessages = [...config.messages, userMessage];
    onUpdate(blockId, {
      config: { ...config, messages: updatedMessages },
    });
    
    setInput('');
    setIsLoading(true);
    
    try {
      // ì»¨í…ìŠ¤íŠ¸ ì¤€ë¹„
      const context = config.includeContext ? prepareContext() : [];
      
      // AI API í˜¸ì¶œ
      const response = await fetch('/api/ai/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          messages: updatedMessages,
          context,
          model: config.model,
          temperature: config.temperature,
          maxTokens: config.maxTokens,
        }),
      });
      
      const data = await response.json();
      
      const assistantMessage = {
        id: generateId(),
        role: 'assistant' as const,
        content: data.content,
        timestamp: Date.now(),
        context: data.context,
      };
      
      onUpdate(blockId, {
        config: {
          ...config,
          messages: [...updatedMessages, assistantMessage],
        },
      });
    } catch (error) {
      console.error('AI chat error:', error);
      // ì—ëŸ¬ ë©”ì‹œì§€ ì¶”ê°€
    } finally {
      setIsLoading(false);
    }
  };
  
  // ë¹ ë¥¸ ì•¡ì…˜
  const handleQuickAction = async (action: QuickAction) => {
    setInput(action.prompt);
    // ìë™ ì „ì†¡
    setTimeout(() => handleSend(), 100);
  };
  
  // ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [config.messages]);
  
  return (
    <div className="ai-assistant-block">
      {/* ë©”ì‹œì§€ ëª©ë¡ */}
      <div className="messages-container">
        {config.messages.map(message => (
          <MessageBubble
            key={message.id}
            message={message}
            onMemoryClick={(memoryId) => handleMemoryClick(memoryId)}
          />
        ))}
        {isLoading && <LoadingIndicator />}
        <div ref={messagesEndRef} />
      </div>
      
      {/* ë¹ ë¥¸ ì•¡ì…˜ */}
      {config.quickActions.length > 0 && (
        <div className="quick-actions">
          {config.quickActions.map(action => (
            <button
              key={action.id}
              onClick={() => handleQuickAction(action)}
              className="quick-action-btn"
            >
              {action.icon} {action.label}
            </button>
          ))}
        </div>
      )}
      
      {/* ì…ë ¥ì°½ */}
      <div className="input-container">
        <textarea
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onKeyDown={(e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSend();
            }
          }}
          placeholder="ğŸ’¬ ë©”ì‹œì§€ ì…ë ¥... (Enterë¡œ ì „ì†¡, Shift+Enterë¡œ ì¤„ë°”ê¿ˆ)"
          rows={2}
        />
        <button
          onClick={handleSend}
          disabled={!input.trim() || isLoading}
          className="send-btn"
        >
          ì „ì†¡
        </button>
      </div>
    </div>
  );
}
```

#### API ì—”ë“œí¬ì¸íŠ¸
```typescript
// app/api/ai/chat/route.ts
export async function POST(req: Request) {
  const { messages, context, model, temperature, maxTokens } = await req.json();
  
  // ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€
  const systemPrompt = `You are a helpful assistant for a personal memory management system.
The user has the following memories in their current context:
${context.map((m: any) => `- ${m.title || 'Untitled'}: ${m.content}`).join('\n')}

Please help the user with their questions about these memories or general assistance.`;
  
  // OpenAI API í˜¸ì¶œ
  const response = await openai.chat.completions.create({
    model: model || 'gpt-4',
    messages: [
      { role: 'system', content: systemPrompt },
      ...messages,
    ],
    temperature: temperature || 0.7,
    max_tokens: maxTokens || 1000,
  });
  
  return Response.json({
    content: response.choices[0].message.content,
    context: {
      memoryIds: context.map((m: any) => m.id),
    },
  });
}
```

---

## 10. ğŸ“… ë°ë“œë¼ì¸ ìœ„ì ¯ (Deadline Widget)

### ğŸ“‹ ê¸°ë³¸ ê°œë…
ë‹¤ê°€ì˜¤ëŠ” ë§ˆê°ì¼ê³¼ ì¼ì •ì„ í‘œì‹œí•˜ê³ , ë©”ëª¨ë¦¬ì—ì„œ ë‚ ì§œë¥¼ ìë™ ì¶”ì¶œí•˜ì—¬ ê´€ë¦¬.

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

#### 10.1 ë°ë“œë¼ì¸ í‘œì‹œ
- **ëª©ë¡ ë·°**: ë‚ ì§œìˆœ ì •ë ¬
- **ìº˜ë¦°ë” ë·°**: ìº˜ë¦°ë”ì— í‘œì‹œ
- **ìš°ì„ ìˆœìœ„**: ê¸´ê¸‰ë„ë³„ ìƒ‰ìƒ
- **ë‚¨ì€ ì‹œê°„**: D-day ê³„ì‚°
- **ì•Œë¦¼**: ë§ˆê°ì¼ ì „ ì•Œë¦¼

#### 10.2 ë‚ ì§œ ì¶”ì¶œ
- **ìë™ ì¶”ì¶œ**: ë©”ëª¨ë¦¬ ë‚´ìš©ì—ì„œ ë‚ ì§œ ì°¾ê¸°
- **íŒ¨í„´ ì¸ì‹**: "ë‚´ì¼", "ë‹¤ìŒ ì£¼", "12ì›” 25ì¼" ë“±
- **ì—°ê²°**: ë©”ëª¨ë¦¬ì™€ ë°ë“œë¼ì¸ ì—°ê²°
- **ìˆ˜ë™ ì¶”ê°€**: ì§ì ‘ ë°ë“œë¼ì¸ ì¶”ê°€

#### 10.3 ê´€ë¦¬
- **ì™„ë£Œ ì²˜ë¦¬**: ì™„ë£Œëœ ë°ë“œë¼ì¸ ì²´í¬
- **ì—°ê¸°**: ë‚ ì§œ ë³€ê²½
- **ì‚­ì œ**: ë°ë“œë¼ì¸ ì œê±°
- **ê·¸ë£¹í™”**: í”„ë¡œì íŠ¸/ì¹´í…Œê³ ë¦¬ë³„

### ğŸ¨ UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… ë°ë“œë¼ì¸                [âš™ï¸] [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ëª©ë¡ â–¼]  [ì˜¤ëŠ˜]  [ì´ë²ˆ ì£¼]  [ì „ì²´]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ”´ ê¸´ê¸‰                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  ğŸ“ í”„ë¡œì íŠ¸ ì œì¶œ                       â”‚
â”‚  ğŸ“… 2024.01.25 (D-3)                    â”‚
â”‚  ğŸ“„ ê´€ë ¨ ë©”ëª¨ë¦¬: 3ê°œ                    â”‚
â”‚  [ì™„ë£Œ] [ì—°ê¸°] [ë³´ê¸°]                   â”‚
â”‚                                         â”‚
â”‚  ğŸŸ¡ ë³´í†µ                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  ğŸ“ íšŒì˜ ì¤€ë¹„                           â”‚
â”‚  ğŸ“… 2024.01.30 (D-8)                    â”‚
â”‚  ğŸ“„ ê´€ë ¨ ë©”ëª¨ë¦¬: 1ê°œ                    â”‚
â”‚  [ì™„ë£Œ] [ì—°ê¸°] [ë³´ê¸°]                   â”‚
â”‚                                         â”‚
â”‚  ğŸŸ¢ ì—¬ìœ                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚  ğŸ“ ë¬¸ì„œ ì‘ì„±                           â”‚
â”‚  ğŸ“… 2024.02.10 (D-19)                   â”‚
â”‚  ğŸ“„ ê´€ë ¨ ë©”ëª¨ë¦¬: 2ê°œ                    â”‚
â”‚  [ì™„ë£Œ] [ì—°ê¸°] [ë³´ê¸°]                   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’» êµ¬í˜„ ìƒì„¸

#### ë°ì´í„° êµ¬ì¡°
```typescript
interface DeadlineBlockConfig {
  id: string;
  type: 'deadline';
  x: number;
  y: number;
  width: number;
  height: number;
  
  // ë°ë“œë¼ì¸ ëª©ë¡
  deadlines: Array<{
    id: string;
    title: string;
    description?: string;
    dueDate: number;  // timestamp
    priority: 'urgent' | 'normal' | 'low';
    completed: boolean;
    completedAt?: number;
    linkedMemoryIds: string[];
    tags: string[];
    reminder?: {
      enabled: boolean;
      beforeDays: number[];  // [1, 3, 7] = 1ì¼ ì „, 3ì¼ ì „, 7ì¼ ì „
    };
  }>;
  
  // í‘œì‹œ ì˜µì…˜
  viewMode: 'list' | 'calendar';
  showCompleted: boolean;
  groupBy: 'priority' | 'date' | 'none';
  sortBy: 'date' | 'priority' | 'title';
  
  // ìë™ ì¶”ì¶œ
  autoExtractFromMemories: boolean;
  extractPatterns: string[];  // ì •ê·œì‹ íŒ¨í„´
}
```

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
// components/DeadlineBlock.tsx
import { parse } from 'date-fns';
import { ko } from 'date-fns/locale';

export default function DeadlineBlock({
  blockId,
  config,
  memories,
  onUpdate,
}: DeadlineBlockProps) {
  // ë©”ëª¨ë¦¬ì—ì„œ ë‚ ì§œ ì¶”ì¶œ
  useEffect(() => {
    if (!config.autoExtractFromMemories) return;
    
    const extractDeadlines = () => {
      const newDeadlines: Deadline[] = [];
      
      memories.forEach(memory => {
        // ë‚ ì§œ íŒ¨í„´ ë§¤ì¹­
        const datePatterns = [
          /\d{4}[-./]\d{1,2}[-./]\d{1,2}/,  // 2024-01-25
          /\d{1,2}ì›”\s*\d{1,2}ì¼/,          // 1ì›” 25ì¼
          /ë‚´ì¼|ëª¨ë ˆ|ë‹¤ìŒ\s*ì£¼|ë‹¤ìŒ\s*ë‹¬/,
          /D-day|D-day\s*\d+/,
          /ë§ˆê°|ë°ë“œë¼ì¸|ì œì¶œ|ì™„ë£Œ.*\d+/,
        ];
        
        const text = `${memory.title} ${memory.content}`;
        datePatterns.forEach(pattern => {
          const matches = text.match(pattern);
          if (matches) {
            const date = parseDate(matches[0], memory.createdAt);
            if (date && date > Date.now()) {
              // ì´ë¯¸ ìˆëŠ” ë°ë“œë¼ì¸ì¸ì§€ í™•ì¸
              if (!config.deadlines.some(d => 
                d.title === memory.title && 
                Math.abs(d.dueDate - date) < 24 * 60 * 60 * 1000
              )) {
                newDeadlines.push({
                  id: generateId(),
                  title: memory.title || 'ì œëª© ì—†ìŒ',
                  description: memory.content.slice(0, 100),
                  dueDate: date,
                  priority: calculatePriority(date),
                  completed: false,
                  linkedMemoryIds: [memory.id],
                  tags: [],
                });
              }
            }
          }
        });
      });
      
      if (newDeadlines.length > 0) {
        onUpdate(blockId, {
          config: {
            ...config,
            deadlines: [...config.deadlines, ...newDeadlines],
          },
        });
      }
    };
    
    extractDeadlines();
  }, [memories, config, blockId, onUpdate]);
  
  // ë‚ ì§œ íŒŒì‹±
  const parseDate = (text: string, baseDate: number): number | null => {
    try {
      // "ë‚´ì¼", "ë‹¤ìŒ ì£¼" ë“± ìƒëŒ€ì  ë‚ ì§œ
      if (text.includes('ë‚´ì¼')) {
        return baseDate + 24 * 60 * 60 * 1000;
      }
      if (text.includes('ëª¨ë ˆ')) {
        return baseDate + 2 * 24 * 60 * 60 * 1000;
      }
      // ì ˆëŒ€ ë‚ ì§œ íŒŒì‹±
      const parsed = parse(text, 'yyyy-MM-dd', new Date(baseDate));
      if (!isNaN(parsed.getTime())) {
        return parsed.getTime();
      }
    } catch (error) {
      return null;
    }
    return null;
  };
  
  // ìš°ì„ ìˆœìœ„ ê³„ì‚°
  const calculatePriority = (dueDate: number): 'urgent' | 'normal' | 'low' => {
    const daysLeft = Math.ceil((dueDate - Date.now()) / (1000 * 60 * 60 * 24));
    if (daysLeft <= 3) return 'urgent';
    if (daysLeft <= 7) return 'normal';
    return 'low';
  };
  
  // í•„í„°ë§ ë° ì •ë ¬
  const displayedDeadlines = useMemo(() => {
    let deadlines = config.deadlines.filter(d => 
      config.showCompleted || !d.completed
    );
    
    // ì •ë ¬
    deadlines.sort((a, b) => {
      if (config.sortBy === 'date') {
        return a.dueDate - b.dueDate;
      }
      if (config.sortBy === 'priority') {
        const priorityOrder = { urgent: 0, normal: 1, low: 2 };
        return priorityOrder[a.priority] - priorityOrder[b.priority];
      }
      return a.title.localeCompare(b.title);
    });
    
    return deadlines;
  }, [config]);
  
  // D-day ê³„ì‚°
  const calculateDaysLeft = (dueDate: number): number => {
    return Math.ceil((dueDate - Date.now()) / (1000 * 60 * 60 * 24));
  };
  
  return (
    <div className="deadline-block">
      {/* í—¤ë” */}
      <div className="deadline-header">
        <select
          value={config.viewMode}
          onChange={(e) => handleViewModeChange(e.target.value)}
        >
          <option value="list">ëª©ë¡</option>
          <option value="calendar">ìº˜ë¦°ë”</option>
        </select>
        <button onClick={handleAddDeadline}>+ ì¶”ê°€</button>
      </div>
      
      {/* ë°ë“œë¼ì¸ ëª©ë¡ */}
      {config.viewMode === 'list' && (
        <div className="deadline-list">
          {groupDeadlines(displayedDeadlines, config.groupBy).map((group, index) => (
            <div key={index} className="deadline-group">
              {config.groupBy !== 'none' && (
                <div className="group-header">{group.label}</div>
              )}
              {group.deadlines.map(deadline => {
                const daysLeft = calculateDaysLeft(deadline.dueDate);
                return (
                  <DeadlineCard
                    key={deadline.id}
                    deadline={deadline}
                    daysLeft={daysLeft}
                    onComplete={() => handleComplete(deadline.id)}
                    onPostpone={(newDate) => handlePostpone(deadline.id, newDate)}
                    onDelete={() => handleDelete(deadline.id)}
                    onMemoryClick={(memoryId) => handleMemoryClick(memoryId)}
                  />
                );
              })}
            </div>
          ))}
        </div>
      )}
      
      {/* ìº˜ë¦°ë” ë·° */}
      {config.viewMode === 'calendar' && (
        <DeadlineCalendar
          deadlines={displayedDeadlines}
          onDeadlineClick={(deadline) => handleDeadlineClick(deadline)}
        />
      )}
    </div>
  );
}
```

---

## ğŸ“ êµ¬í˜„ ìš°ì„ ìˆœìœ„ ìš”ì•½

### ì¦‰ì‹œ êµ¬í˜„ ê°€ëŠ¥ (1-2ì£¼)
1. **ìŠ¤í‹°ì»¤ ë…¸íŠ¸** - ê°€ì¥ ê°„ë‹¨, ë†’ì€ ì‚¬ìš©ì„±
2. **ê²€ìƒ‰ ìœ„ì ¯** - ê¸°ì¡´ ê²€ìƒ‰ ê¸°ëŠ¥ í™•ì¥
3. **ë§í¬ ì»¬ë ‰ì…˜** - URL ë©”íƒ€ë°ì´í„° ì¶”ì¶œë§Œ êµ¬í˜„

### ì¤‘ê¸° êµ¬í˜„ (2-4ì£¼)
4. **íƒ€ì„ë¼ì¸ ìœ„ì ¯** - ì‹œê°„ì¶• ê³„ì‚° ë¡œì§ í•„ìš”
5. **í†µê³„ ëŒ€ì‹œë³´ë“œ** - ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—°ë™
6. **ëª©í‘œ ì¶”ì ** - ê¸°ì¡´ Goal ì‹œìŠ¤í…œ í™œìš©

### ì¥ê¸° êµ¬í˜„ (1-2ê°œì›”)
7. **ë¯¸ë””ì–´ ê°¤ëŸ¬ë¦¬** - ì´ë¯¸ì§€ ì²˜ë¦¬, ì¸ë„¤ì¼ ìƒì„±
8. **AI ì–´ì‹œìŠ¤í„´íŠ¸** - AI API ì—°ë™, ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
9. **ì§€ë„ ìœ„ì ¯** - ì™¸ë¶€ API ì—°ë™, í´ëŸ¬ìŠ¤í„°ë§
10. **ë°ë“œë¼ì¸ ìœ„ì ¯** - ë‚ ì§œ íŒŒì‹±, ì•Œë¦¼ ì‹œìŠ¤í…œ

---

**ì–´ë–¤ ìœ„ì ¯ë¶€í„° êµ¬í˜„í•´ë³¼ê¹Œìš”?** ğŸš€
